# æ¡å¯¸ãƒ‡ãƒ¼ã‚¿ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ å®Ÿè£…å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ

**ä½œæˆæ—¥**: 2025-01  
**å„ªå…ˆåº¦**: ğŸ”´ é«˜å„ªå…ˆåº¦  
**å·¥æ•°**: 3-5æ—¥ï¼ˆå®Ÿè£…å®Œäº†ï¼‰  
**ç›®çš„**: ãƒ‡ãƒ¼ã‚¿å“è³ªã®ç¢ºä¿ã€ç•°å¸¸å€¤æ¤œå‡º

---

## âœ… å®Ÿè£…å®Œäº†å†…å®¹

### 1. æ¡å¯¸ãƒ‡ãƒ¼ã‚¿ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹

**ãƒ•ã‚¡ã‚¤ãƒ«**: `internal/service/measurement_validation_service.go`

#### å®Ÿè£…æ©Ÿèƒ½

1. **å‰å›æ¡å¯¸ãƒ‡ãƒ¼ã‚¿ã¨ã®æ¯”è¼ƒ**
   - é¡§å®¢ã®æ³¨æ–‡å±¥æ­´ã‹ã‚‰æœ€æ–°ã®æ¡å¯¸ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
   - ç¾åœ¨ã®æ¡å¯¸ãƒ‡ãƒ¼ã‚¿ã¨æ¯”è¼ƒ
   - Â±5cmä»¥ä¸Šã®å·®åˆ†ã‚’æ¤œå‡º

2. **ç•°å¸¸å€¤æ¤œå‡º**
   - å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ç¯„å›²ãƒã‚§ãƒƒã‚¯
   - èº«é•·: 50-250cm
   - ãƒã‚¹ãƒˆ: 50-200cm
   - ã‚¦ã‚¨ã‚¹ãƒˆ: 40-150cm

3. **ã‚¢ãƒ©ãƒ¼ãƒˆç”Ÿæˆ**
   - è­¦å‘Šï¼ˆWarningï¼‰: Â±5cmä»¥ä¸Šã€10cmæœªæº€ã®å·®åˆ†
   - ã‚¨ãƒ©ãƒ¼ï¼ˆErrorï¼‰: Â±10cmä»¥ä¸Šã®å·®åˆ†ã€ç¯„å›²å¤–ã®å€¤

### 2. APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

**ãƒ•ã‚¡ã‚¤ãƒ«**: `internal/handler/measurement_validation_handler.go`

#### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

1. **POST /api/measurements/validate**
   - å‰å›æ¡å¯¸ãƒ‡ãƒ¼ã‚¿ã¨ã®æ¯”è¼ƒ
   - ç•°å¸¸å€¤æ¤œå‡º
   - ã‚¢ãƒ©ãƒ¼ãƒˆç”Ÿæˆ

2. **POST /api/measurements/validate-range**
   - æ¡å¯¸ãƒ‡ãƒ¼ã‚¿ã®ç¯„å›²ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
   - ç•°å¸¸å€¤æ¤œå‡ºã®ã¿

---

## ğŸ“¡ APIä»•æ§˜

### POST /api/measurements/validate

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```json
{
  "customer_id": "customer_123",
  "current_measurements": {
    "height": 170.0,
    "bust": 90.0,
    "waist": 75.0,
    "hip": 95.0,
    "thigh": 55.0,
    "knee": 40.0,
    "calf": 35.0,
    "ob": 110.0
  }
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "is_valid": false,
  "alerts": [
    {
      "field": "bust",
      "current": 90.0,
      "previous": 85.0,
      "difference": 5.0,
      "threshold": 5.0,
      "severity": "warning",
      "message": "bustã®å€¤ãŒå‰å›ã‚ˆã‚Š5.0cmç•°ãªã‚Šã¾ã™ï¼ˆç¾åœ¨: 90.0cm, å‰å›: 85.0cmï¼‰"
    }
  ],
  "has_warnings": true,
  "has_errors": false,
  "previous_data": {
    "height": 170.0,
    "bust": 85.0,
    "waist": 75.0,
    "hip": 95.0
  }
}
```

### POST /api/measurements/validate-range

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:
```json
{
  "measurements": {
    "height": 300.0,
    "bust": 90.0,
    "waist": 75.0
  }
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:
```json
{
  "is_valid": false,
  "alerts": [
    {
      "field": "height",
      "current": 300.0,
      "severity": "error",
      "message": "èº«é•·ã®å€¤ãŒç•°å¸¸ã§ã™: 300.0cmï¼ˆæ­£å¸¸ç¯„å›²: 50-250cmï¼‰"
    }
  ]
}
```

---

## ğŸ” ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯

### å‰å›ãƒ‡ãƒ¼ã‚¿ã¨ã®æ¯”è¼ƒ

**é–¾å€¤**: Â±5cm

- **è­¦å‘Šï¼ˆWarningï¼‰**: å·®åˆ†ãŒ5cmä»¥ä¸Šã€10cmæœªæº€
- **ã‚¨ãƒ©ãƒ¼ï¼ˆErrorï¼‰**: å·®åˆ†ãŒ10cmä»¥ä¸Š

**æ¯”è¼ƒå¯¾è±¡ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**:
- heightï¼ˆèº«é•·ï¼‰
- bustï¼ˆãƒã‚¹ãƒˆï¼‰
- waistï¼ˆã‚¦ã‚¨ã‚¹ãƒˆï¼‰
- hipï¼ˆãƒ’ãƒƒãƒ—ï¼‰
- thighï¼ˆå¤ªã‚‚ã‚‚ï¼‰
- kneeï¼ˆè†ï¼‰
- calfï¼ˆãµãã‚‰ã¯ãï¼‰
- obï¼ˆOBï¼‰
- jacket_lengthï¼ˆã‚¸ãƒ£ã‚±ãƒƒãƒˆé•·ï¼‰
- sleeveï¼ˆè¢–é•·ï¼‰
- chestï¼ˆèƒ¸å›²ï¼‰

### ç¯„å›²ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | æ­£å¸¸ç¯„å›² | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ |
|-----------|---------|----------------|
| height | 50-250cm | èº«é•·ã®å€¤ãŒç•°å¸¸ã§ã™ |
| bust | 50-200cm | ãƒã‚¹ãƒˆã®å€¤ãŒç•°å¸¸ã§ã™ |
| waist | 40-150cm | ã‚¦ã‚¨ã‚¹ãƒˆã®å€¤ãŒç•°å¸¸ã§ã™ |

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆæ–¹æ³•

### 1. å‰å›ãƒ‡ãƒ¼ã‚¿ã¨ã®æ¯”è¼ƒãƒ†ã‚¹ãƒˆ

```bash
# 1. é¡§å®¢ã®æ³¨æ–‡ã‚’ä½œæˆï¼ˆæ¡å¯¸ãƒ‡ãƒ¼ã‚¿ä»˜ãï¼‰
curl -X POST "http://localhost:8080/api/orders?tenant_id=tenant_test" \
  -H "Content-Type: application/json" \
  -d '{
    "customer_id": "customer_123",
    "fabric_id": "fabric_456",
    "total_amount": 50000,
    "delivery_date": "2025-12-31T00:00:00Z",
    "details": {
      "measurement_data": {
        "height": 170.0,
        "bust": 85.0,
        "waist": 75.0
      }
    }
  }'

# 2. æ–°ã—ã„æ¡å¯¸ãƒ‡ãƒ¼ã‚¿ã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
curl -X POST "http://localhost:8080/api/measurements/validate?tenant_id=tenant_test" \
  -H "Content-Type: application/json" \
  -d '{
    "customer_id": "customer_123",
    "current_measurements": {
      "height": 170.0,
      "bust": 90.0,
      "waist": 75.0
    }
  }'
```

**æœŸå¾…çµæœ**:
- bustã®å·®åˆ†ãŒ5cmï¼ˆ90.0 - 85.0 = 5.0ï¼‰ã§è­¦å‘ŠãŒç™ºç”Ÿ

### 2. ç¯„å›²ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ

```bash
curl -X POST "http://localhost:8080/api/measurements/validate-range?tenant_id=tenant_test" \
  -H "Content-Type: application/json" \
  -d '{
    "measurements": {
      "height": 300.0,
      "bust": 90.0
    }
  }'
```

**æœŸå¾…çµæœ**:
- heightãŒ300cmã§ç¯„å›²å¤–ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ

---

## ğŸ“Š å®Ÿè£…çµ±è¨ˆ

- **ã‚µãƒ¼ãƒ“ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«**: 1ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆç´„300è¡Œï¼‰
- **ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«**: 1ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆç´„100è¡Œï¼‰
- **APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: 2ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
- **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ«ãƒ¼ãƒ«**: 11ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®æ¯”è¼ƒã€3ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ç¯„å›²ãƒã‚§ãƒƒã‚¯

---

## ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### Flutterã‚¢ãƒ—ãƒªã¸ã®çµ±åˆ

1. **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³APIå‘¼ã³å‡ºã—**
   - æ¡å¯¸ãƒ‡ãƒ¼ã‚¿å…¥åŠ›æ™‚ã«è‡ªå‹•ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
   - ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤ºUI

2. **ã‚¢ãƒ©ãƒ¼ãƒˆè¡¨ç¤º**
   - è­¦å‘Š: é»„è‰²ã®ãƒãƒŠãƒ¼
   - ã‚¨ãƒ©ãƒ¼: èµ¤è‰²ã®ãƒãƒŠãƒ¼
   - å‰å›ãƒ‡ãƒ¼ã‚¿ã¨ã®æ¯”è¼ƒçµæœè¡¨ç¤º

---

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **[é–‹ç™ºè¨ˆç”»æ›¸æ¤œè¨¼ãƒ¬ãƒãƒ¼ãƒˆ](./100_Development_Plan_Verification.md)**
- **[è‡ªå‹•è£œæ­£ã‚¨ãƒ³ã‚¸ãƒ³å®Ÿè£…è¨ˆç”»](./101_Auto_Patterner_Implementation_Plan.md)**
- **[å®Ÿè£…å®Œäº†ã‚µãƒãƒªãƒ¼](./102_Implementation_Summary.md)**

---

**æœ€çµ‚æ›´æ–°æ—¥**: 2025-01

