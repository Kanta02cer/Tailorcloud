# TailorCloud MVP æŠ€è¡“ä»•æ§˜æ›¸

**ä½œæˆæ—¥**: 2025-01  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
**å¯¾è±¡**: Phase 1 MVPï¼ˆå€‹äººãƒ†ãƒ¼ãƒ©ãƒ¼å‘ã‘ï¼‰  
**é–‹ç™ºæœŸé–“**: 1ãƒ¶æœˆä»¥å†…  
**ç›®æ¨™**: çŸ¥ã‚Šåˆã„ã®ãƒ†ãƒ¼ãƒ©ãƒ¼10äººãŒå®Ÿå‹™ã§ä½¿ãˆã‚‹ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—

---

## ğŸ“‹ ç›®æ¬¡

1. [ERå›³ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«è¨­è¨ˆï¼‰](#1-erå›³ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«è¨­è¨ˆ)
2. [APIå®šç¾©æ›¸](#2-apiå®šç¾©æ›¸)
3. [ç”»é¢é·ç§»å›³](#3-ç”»é¢é·ç§»å›³)
4. [ã‚¤ãƒ³ãƒ•ãƒ©æ§‹æˆå›³](#4-ã‚¤ãƒ³ãƒ•ãƒ©æ§‹æˆå›³)

---

## 1. ERå›³ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«è¨­è¨ˆï¼‰

### 1.1 MVPç”¨ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«æ¦‚è¦

MVPã§ã¯ä»¥ä¸‹ã®ã‚³ã‚¢ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã¿ã‚’å®Ÿè£…ã—ã¾ã™ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TailorCloud MVP ER Diagram                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   tenants    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚
â”‚ name         â”‚
â”‚ type         â”‚â”€â”€â”
â”‚ legal_name   â”‚  â”‚
â”‚ address      â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    users     â”‚ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ id (PK)      â”‚ â”‚
â”‚ tenant_id(FK)â”œâ”€â”˜
â”‚ email        â”‚
â”‚ name         â”‚
â”‚ role         â”‚
â”‚ firebase_uid â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  customers   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚
â”‚ tenant_id(FK)â”œâ”€â”€â”
â”‚ name         â”‚  â”‚
â”‚ email        â”‚  â”‚
â”‚ phone        â”‚  â”‚
â”‚ address      â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚    orders    â”‚  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚ id (PK)      â”‚  â”‚
â”‚ tenant_id(FK)â”œâ”€â”€â”¼â”€â”€â”
â”‚ customer_id  â”‚  â”‚  â”‚
â”‚              â”‚  â”‚  â”‚
â”‚ order_number â”‚  â”‚  â”‚
â”‚ status       â”‚  â”‚  â”‚
â”‚              â”‚  â”‚  â”‚
â”‚ total_amount â”‚  â”‚  â”‚
â”‚ tax_amount   â”‚  â”‚  â”‚
â”‚ tax_rate     â”‚  â”‚  â”‚
â”‚              â”‚  â”‚  â”‚
â”‚ delivery_dateâ”‚  â”‚  â”‚
â”‚ payment_due  â”‚  â”‚  â”‚
â”‚              â”‚  â”‚  â”‚
â”‚ compliance_  â”‚  â”‚  â”‚
â”‚   doc_url    â”‚  â”‚  â”‚
â”‚ compliance_  â”‚  â”‚  â”‚
â”‚   doc_hash   â”‚  â”‚  â”‚
â”‚              â”‚  â”‚  â”‚
â”‚ created_by   â”‚  â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
                  â”‚  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ order_items  â”‚  â”‚  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚
â”‚ id (PK)      â”‚  â”‚  â”‚
â”‚ order_id(FK) â”œâ”€â”€â”˜  â”‚
â”‚              â”‚     â”‚
â”‚ item_type    â”‚     â”‚
â”‚ fabric_id    â”‚     â”‚
â”‚              â”‚     â”‚
â”‚ measurements â”‚     â”‚
â”‚   (JSONB)    â”‚     â”‚
â”‚ options      â”‚     â”‚
â”‚   (JSONB)    â”‚     â”‚
â”‚              â”‚     â”‚
â”‚ required_    â”‚     â”‚
â”‚   fabric_    â”‚     â”‚
â”‚   length     â”‚     â”‚
â”‚ unit_price   â”‚     â”‚
â”‚ quantity     â”‚     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   fabrics    â”‚     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚ id (PK)      â”‚     â”‚
â”‚ tenant_id(FK)â”œâ”€â”€â”€â”€â”€â”˜
â”‚              â”‚
â”‚ sku          â”‚
â”‚ brand        â”‚
â”‚ name         â”‚
â”‚              â”‚
â”‚ cost_price   â”‚
â”‚ sales_price  â”‚
â”‚              â”‚
â”‚ image_url    â”‚
â”‚ is_active    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ compliance_  â”‚
â”‚  documents   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)      â”‚
â”‚ order_id(FK) â”œâ”€â”€â”
â”‚              â”‚  â”‚
â”‚ document_    â”‚  â”‚
â”‚   type       â”‚  â”‚
â”‚ parent_doc_  â”‚  â”‚
â”‚   id         â”‚  â”‚
â”‚              â”‚  â”‚
â”‚ pdf_url      â”‚  â”‚
â”‚ pdf_hash     â”‚  â”‚
â”‚              â”‚  â”‚
â”‚ generated_at â”‚  â”‚
â”‚ generated_by â”‚  â”‚
â”‚ amendment_   â”‚  â”‚
â”‚   reason     â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                  â”‚
                  â””â”€â”€â”€ (orders.id)
```

### 1.2 ãƒ†ãƒ¼ãƒ–ãƒ«è©³ç´°å®šç¾©

#### 1.2.1 tenantsï¼ˆãƒ†ãƒŠãƒ³ãƒˆï¼‰

**ç›®çš„**: ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå¯¾å¿œã®ãƒ†ãƒŠãƒ³ãƒˆæƒ…å ±

| ã‚«ãƒ©ãƒ å | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|-----|------|------|
| id | UUID | PK | ãƒ†ãƒŠãƒ³ãƒˆID |
| name | VARCHAR(255) | NOT NULL | ãƒ†ãƒŠãƒ³ãƒˆåï¼ˆåº—èˆ—åï¼‰ |
| legal_name | VARCHAR(255) | | æ³•äººåï¼ˆä¸‹è«‹æ³•è¨˜è¼‰ç”¨ï¼‰ |
| address | TEXT | | ä½æ‰€ï¼ˆä¸‹è«‹æ³•è¨˜è¼‰ç”¨ï¼‰ |
| invoice_registration_no | VARCHAR(50) | | ã‚¤ãƒ³ãƒœã‚¤ã‚¹ç™»éŒ²ç•ªå·ï¼ˆTç•ªå·ï¼‰ |
| type | VARCHAR(50) | NOT NULL, CHECK | 'TAILOR' ã¾ãŸã¯ 'FACTORY' |
| is_active | BOOLEAN | DEFAULT TRUE | ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ•ãƒ©ã‚° |
| created_at | TIMESTAMPTZ | DEFAULT NOW() | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMPTZ | DEFAULT NOW() | æ›´æ–°æ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- `idx_tenants_type` (type)
- `idx_tenants_active` (is_active) WHERE is_active = TRUE

#### 1.2.2 usersï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰

**ç›®çš„**: ã‚·ã‚¹ãƒ†ãƒ åˆ©ç”¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±

| ã‚«ãƒ©ãƒ å | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|-----|------|------|
| id | UUID | PK | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| tenant_id | UUID | FK â†’ tenants.id | ãƒ†ãƒŠãƒ³ãƒˆID |
| email | VARCHAR(255) | NOT NULL, UNIQUE | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ |
| firebase_uid | VARCHAR(255) | UNIQUE | Firebase Authentication UID |
| name | VARCHAR(255) | NOT NULL | ãƒ¦ãƒ¼ã‚¶ãƒ¼å |
| role | VARCHAR(50) | NOT NULL, CHECK | 'OWNER', 'STAFF' ãªã© |
| is_active | BOOLEAN | DEFAULT TRUE | ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ•ãƒ©ã‚° |
| last_login_at | TIMESTAMPTZ | | æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³æ—¥æ™‚ |
| created_at | TIMESTAMPTZ | DEFAULT NOW() | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMPTZ | DEFAULT NOW() | æ›´æ–°æ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- `idx_users_tenant_id` (tenant_id)
- `idx_users_email` (email)
- `idx_users_firebase_uid` (firebase_uid) WHERE firebase_uid IS NOT NULL

#### 1.2.3 customersï¼ˆé¡§å®¢ï¼‰

**ç›®çš„**: é¡§å®¢æƒ…å ±ï¼ˆCRMï¼‰

| ã‚«ãƒ©ãƒ å | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|-----|------|------|
| id | UUID | PK | é¡§å®¢ID |
| tenant_id | UUID | FK â†’ tenants.id | ãƒ†ãƒŠãƒ³ãƒˆID |
| name | VARCHAR(255) | NOT NULL | é¡§å®¢å |
| email | VARCHAR(255) | | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ |
| phone | VARCHAR(50) | | é›»è©±ç•ªå· |
| address | TEXT | | ä½æ‰€ |
| created_at | TIMESTAMPTZ | DEFAULT NOW() | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMPTZ | DEFAULT NOW() | æ›´æ–°æ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- `idx_customers_tenant_id` (tenant_id)
- `idx_customers_name` (tenant_id, name)

#### 1.2.4 ordersï¼ˆæ³¨æ–‡ï¼‰

**ç›®çš„**: æ³¨æ–‡æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ã‚¨ãƒ³ã‚¸ãƒ³ã®ä¸­å¿ƒï¼‰

| ã‚«ãƒ©ãƒ å | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|-----|------|------|
| id | UUID | PK | æ³¨æ–‡ID |
| tenant_id | UUID | FK â†’ tenants.id | ãƒ†ãƒŠãƒ³ãƒˆID |
| order_number | VARCHAR(50) | NOT NULL, UNIQUE(tenant_id, order_number) | æ³¨æ–‡ç•ªå·ï¼ˆä¾‹: "ORD-2025-001"ï¼‰ |
| customer_id | UUID | FK â†’ customers.id | é¡§å®¢ID |
| status | VARCHAR(50) | NOT NULL, CHECK | 'DRAFT', 'CONFIRMED', 'PAID', 'CANCELLED' |
| total_amount | DECIMAL(12, 2) | NOT NULL | ç¨æŠœåˆè¨ˆé‡‘é¡ |
| tax_amount | DECIMAL(12, 2) | NOT NULL, DEFAULT 0 | æ¶ˆè²»ç¨é¡ |
| tax_rate | DECIMAL(3, 2) | NOT NULL, DEFAULT 0.10 | æ¶ˆè²»ç¨ç‡ï¼ˆ10% or 8%ï¼‰ |
| currency | VARCHAR(3) | DEFAULT 'JPY' | é€šè²¨ã‚³ãƒ¼ãƒ‰ |
| ordered_at | TIMESTAMPTZ | | æ³¨æ–‡æ—¥æ™‚ |
| delivery_due_date | DATE | | ç´æœŸ |
| payment_due_date | DATE | NOT NULL | æ”¯æ‰•æœŸæ—¥ï¼ˆä¸‹è«‹æ³•60æ—¥ãƒ«ãƒ¼ãƒ«ï¼‰ |
| compliance_doc_url | TEXT | | ä¸‹è«‹æ³•3æ¡æ›¸é¢PDFã®URL |
| compliance_doc_hash | VARCHAR(255) | | PDFã®ãƒãƒƒã‚·ãƒ¥å€¤ï¼ˆæ”¹ã–ã‚“é˜²æ­¢ï¼‰ |
| invoice_issued_at | TIMESTAMPTZ | | è«‹æ±‚æ›¸ç™ºè¡Œæ—¥æ™‚ |
| created_at | TIMESTAMPTZ | DEFAULT NOW() | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMPTZ | DEFAULT NOW() | æ›´æ–°æ—¥æ™‚ |
| created_by | UUID | FK â†’ users.id | ä½œæˆãƒ¦ãƒ¼ã‚¶ãƒ¼ID |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- `idx_orders_tenant_id` (tenant_id)
- `idx_orders_status` (status)
- `idx_orders_customer_id` (customer_id)
- `idx_orders_created_at` (created_at DESC)
- `idx_orders_tenant_created` (tenant_id, created_at DESC)
- `idx_orders_order_number` (tenant_id, order_number)

#### 1.2.5 order_itemsï¼ˆæ³¨æ–‡æ˜ç´°ï¼‰

**ç›®çš„**: æ³¨æ–‡ã®æ˜ç´°æƒ…å ±ï¼ˆæ¡å¯¸ãƒ‡ãƒ¼ã‚¿ã€ä»•æ§˜ç­‰ï¼‰

| ã‚«ãƒ©ãƒ å | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|-----|------|------|
| id | UUID | PK | æ˜ç´°ID |
| order_id | UUID | FK â†’ orders.id | æ³¨æ–‡ID |
| item_type | VARCHAR(50) | | 'SUIT', 'SHIRT', 'COAT' ãªã© |
| fabric_id | UUID | FK â†’ fabrics.id | ç”Ÿåœ°ID |
| measurements | JSONB | NOT NULL | å¯¸æ³•ãƒ‡ãƒ¼ã‚¿ï¼ˆJSONå½¢å¼ï¼‰ |
| options | JSONB | | ä»•æ§˜ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆJSONå½¢å¼ï¼‰ |
| required_fabric_length | DECIMAL(5, 2) | NOT NULL | å¿…è¦ç”¨å°ºï¼ˆä¾‹: 3.2mï¼‰ |
| unit_price | DECIMAL(10, 2) | NOT NULL | å˜ä¾¡ |
| quantity | INTEGER | NOT NULL, DEFAULT 1 | æ•°é‡ |
| created_at | TIMESTAMPTZ | DEFAULT NOW() | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMPTZ | DEFAULT NOW() | æ›´æ–°æ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- `idx_order_items_order_id` (order_id)
- `idx_order_items_fabric_id` (fabric_id)

#### 1.2.6 fabricsï¼ˆç”Ÿåœ°ï¼‰

**ç›®çš„**: ç”Ÿåœ°ãƒã‚¹ã‚¿æƒ…å ±

| ã‚«ãƒ©ãƒ å | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|-----|------|------|
| id | UUID | PK | ç”Ÿåœ°ID |
| tenant_id | UUID | FK â†’ tenants.id | ãƒ†ãƒŠãƒ³ãƒˆID |
| supplier_id | UUID | FK â†’ tenants.id | ä»•å…¥å…ˆãƒ†ãƒŠãƒ³ãƒˆID |
| sku | VARCHAR(100) | NOT NULL | å“ç•ª |
| brand | VARCHAR(100) | NOT NULL | ãƒ–ãƒ©ãƒ³ãƒ‰åï¼ˆä¾‹: "V.B.C", "Zegna"ï¼‰ |
| name | VARCHAR(255) | NOT NULL | ç”Ÿåœ°å |
| composition | VARCHAR(255) | | æ··ç‡ï¼ˆä¾‹: "Wool 100%"ï¼‰ |
| cost_price | DECIMAL(10, 2) | | åŸä¾¡ |
| sales_price | DECIMAL(10, 2) | | ä¸Šä»£ï¼ˆè²©å£²ä¾¡æ ¼ï¼‰ |
| image_url | TEXT | | ç”Ÿåœ°ç”»åƒURL |
| is_active | BOOLEAN | DEFAULT TRUE | ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ•ãƒ©ã‚° |
| created_at | TIMESTAMPTZ | DEFAULT NOW() | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMPTZ | DEFAULT NOW() | æ›´æ–°æ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- `idx_fabrics_tenant_id` (tenant_id)
- `idx_fabrics_sku` (tenant_id, sku)
- `idx_fabrics_brand` (brand)
- `idx_fabrics_active` (is_active) WHERE is_active = TRUE

#### 1.2.7 compliance_documentsï¼ˆã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹æ–‡æ›¸ï¼‰

**ç›®çš„**: ä¸‹è«‹æ³•3æ¡æ›¸é¢PDFã®å±¥æ­´ç®¡ç†

| ã‚«ãƒ©ãƒ å | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|-----|------|------|
| id | UUID | PK | æ–‡æ›¸ID |
| order_id | UUID | FK â†’ orders.id | æ³¨æ–‡ID |
| document_type | VARCHAR(50) | NOT NULL, CHECK | 'INITIAL'ï¼ˆåˆå›ï¼‰ã¾ãŸã¯ 'AMENDMENT'ï¼ˆä¿®æ­£ï¼‰ |
| parent_document_id | UUID | FK â†’ compliance_documents.id | ä¿®æ­£å…ƒã®æ–‡æ›¸IDï¼ˆä¿®æ­£æ³¨æ–‡æ›¸ã®å ´åˆï¼‰ |
| pdf_url | TEXT | NOT NULL | PDF URLï¼ˆCloud Storageï¼‰ |
| pdf_hash | VARCHAR(255) | NOT NULL | PDFã®ãƒãƒƒã‚·ãƒ¥å€¤ï¼ˆSHA-256ï¼‰ |
| generated_at | TIMESTAMPTZ | NOT NULL | ç”Ÿæˆæ—¥æ™‚ |
| generated_by | UUID | FK â†’ users.id | ç”Ÿæˆè€…ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| amendment_reason | TEXT | | ä¿®æ­£ç†ç”±ï¼ˆä¿®æ­£æ³¨æ–‡æ›¸ã®å ´åˆï¼‰ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- `idx_compliance_documents_order_id` (order_id)
- `idx_compliance_documents_type` (document_type)

### 1.3 ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã®ç‰¹å¾´

1. **ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå¯¾å¿œ**: ã™ã¹ã¦ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«`tenant_id`ã‚’æŒã¡ã€ãƒ‡ãƒ¼ã‚¿åˆ†é›¢ã‚’å®Ÿç¾
2. **ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹å¯¾å¿œ**: `compliance_documents`ãƒ†ãƒ¼ãƒ–ãƒ«ã§PDFå±¥æ­´ç®¡ç†
3. **æŸ”è»Ÿãªãƒ‡ãƒ¼ã‚¿æ§‹é€ **: `order_items.measurements`ã¨`options`ã¯JSONBã§å°†æ¥ã®æ‹¡å¼µã«å¯¾å¿œ
4. **ç›£æŸ»å¯¾å¿œ**: `orders.created_by`ã§ä½œæˆè€…ã‚’è¨˜éŒ²

---

## 2. APIå®šç¾©æ›¸

### 2.1 èªè¨¼æ–¹å¼

**èªè¨¼æ–¹æ³•**: Firebase Authentication JWT  
**ãƒ˜ãƒƒãƒ€ãƒ¼**: `Authorization: Bearer <JWT_TOKEN>`

**èªè¨¼ä¸è¦ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:
- `GET /health`
- `GET /api/metrics`

**èªè¨¼å¿…é ˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: ä¸Šè¨˜ä»¥å¤–ã™ã¹ã¦

### 2.2 ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§ï¼ˆMVPï¼‰

#### 2.2.1 ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

```
GET /health
```

**èªè¨¼**: ä¸è¦  
**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: `200 OK`
```json
"OK"
```

---

#### 2.2.2 é¡§å®¢ç®¡ç†ï¼ˆCRMï¼‰

##### é¡§å®¢ä½œæˆ

```
POST /api/customers
```

**èªè¨¼**: å¿…é ˆï¼ˆOwner/Staffï¼‰  
**ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£**:
```json
{
  "name": "ç”°ä¸­ å¤ªéƒ",
  "email": "tanaka@example.com",
  "phone": "090-1234-5678",
  "address": "æ±äº¬éƒ½æ¸‹è°·åŒº..."
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: `201 Created`
```json
{
  "id": "customer-001",
  "tenant_id": "tenant-123",
  "name": "ç”°ä¸­ å¤ªéƒ",
  "email": "tanaka@example.com",
  "phone": "090-1234-5678",
  "address": "æ±äº¬éƒ½æ¸‹è°·åŒº...",
  "created_at": "2025-01-01T00:00:00Z",
  "updated_at": "2025-01-01T00:00:00Z"
}
```

##### é¡§å®¢ä¸€è¦§å–å¾—

```
GET /api/customers?tenant_id={tenant_id}&page=1&limit=20
```

**èªè¨¼**: å¿…é ˆ  
**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- `tenant_id` (å¿…é ˆ): ãƒ†ãƒŠãƒ³ãƒˆID
- `page` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): ãƒšãƒ¼ã‚¸ç•ªå·ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1ï¼‰
- `limit` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): 1ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®ä»¶æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 20ï¼‰
- `search` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆåå‰ã€ãƒ¡ãƒ¼ãƒ«ã€é›»è©±ç•ªå·ï¼‰

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: `200 OK`
```json
{
  "customers": [
    {
      "id": "customer-001",
      "tenant_id": "tenant-123",
      "name": "ç”°ä¸­ å¤ªéƒ",
      "email": "tanaka@example.com",
      "phone": "090-1234-5678",
      "address": "æ±äº¬éƒ½æ¸‹è°·åŒº...",
      "created_at": "2025-01-01T00:00:00Z"
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 100,
    "total_pages": 5
  }
}
```

##### é¡§å®¢å–å¾—ï¼ˆå˜ä¸€ï¼‰

```
GET /api/customers/{customer_id}?tenant_id={tenant_id}
```

**èªè¨¼**: å¿…é ˆ  
**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: `200 OK`
```json
{
  "id": "customer-001",
  "tenant_id": "tenant-123",
  "name": "ç”°ä¸­ å¤ªéƒ",
  "email": "tanaka@example.com",
  "phone": "090-1234-5678",
  "address": "æ±äº¬éƒ½æ¸‹è°·åŒº...",
  "created_at": "2025-01-01T00:00:00Z",
  "updated_at": "2025-01-01T00:00:00Z"
}
```

##### é¡§å®¢æ›´æ–°

```
PUT /api/customers/{customer_id}
```

**èªè¨¼**: å¿…é ˆï¼ˆOwner/Staffï¼‰  
**ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£**:
```json
{
  "name": "ç”°ä¸­ å¤ªéƒï¼ˆæ›´æ–°ï¼‰",
  "email": "tanaka-updated@example.com",
  "phone": "090-1234-5678",
  "address": "æ±äº¬éƒ½æ¸‹è°·åŒº...ï¼ˆæ›´æ–°ï¼‰"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: `200 OK`
```json
{
  "id": "customer-001",
  "tenant_id": "tenant-123",
  "name": "ç”°ä¸­ å¤ªéƒï¼ˆæ›´æ–°ï¼‰",
  "email": "tanaka-updated@example.com",
  "phone": "090-1234-5678",
  "address": "æ±äº¬éƒ½æ¸‹è°·åŒº...ï¼ˆæ›´æ–°ï¼‰",
  "updated_at": "2025-01-01T01:00:00Z"
}
```

---

#### 2.2.3 æ³¨æ–‡ç®¡ç†

##### æ³¨æ–‡ä½œæˆ

```
POST /api/orders
```

**èªè¨¼**: å¿…é ˆï¼ˆOwner/Staffï¼‰  
**ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£**:
```json
{
  "customer_id": "customer-001",
  "order_items": [
    {
      "item_type": "SUIT",
      "fabric_id": "fabric-001",
      "measurements": {
        "jacket_length": 72.5,
        "sleeve": 60.0,
        "chest": 100.0
      },
      "options": {
        "lapel": "notch",
        "lining": "cupra_A"
      },
      "required_fabric_length": 3.2,
      "unit_price": 135000,
      "quantity": 1
    }
  ],
  "delivery_due_date": "2025-12-31",
  "description": "ã‚ªãƒ¼ãƒ€ãƒ¼ã‚¹ãƒ¼ãƒ„ç¸«è£½"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: `201 Created`
```json
{
  "id": "order-001",
  "tenant_id": "tenant-123",
  "order_number": "ORD-2025-001",
  "customer_id": "customer-001",
  "status": "DRAFT",
  "total_amount": 135000,
  "tax_amount": 13500,
  "tax_rate": 0.10,
  "delivery_due_date": "2025-12-31",
  "payment_due_date": "2026-03-01",
  "created_at": "2025-01-01T00:00:00Z",
  "created_by": "user-001"
}
```

##### æ³¨æ–‡ç¢ºå®šï¼ˆç™ºæ³¨æ›¸ç”Ÿæˆï¼‰

```
POST /api/orders/{order_id}/confirm
```

**èªè¨¼**: å¿…é ˆï¼ˆOwner/Staffï¼‰  
**ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£**:
```json
{
  "principal_name": "Regalis Societas"
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: `200 OK`
```json
{
  "id": "order-001",
  "status": "CONFIRMED",
  "compliance_doc_url": "https://storage.googleapis.com/tailorcloud-docs/order-001-initial.pdf",
  "compliance_doc_hash": "sha256:abc123...",
  "updated_at": "2025-01-01T00:05:00Z"
}
```

**æ³¨æ„**: ã“ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™ï¼š
1. æ³¨æ–‡ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’`DRAFT`ã‹ã‚‰`CONFIRMED`ã«å¤‰æ›´
2. ä¸‹è«‹æ³•3æ¡æ›¸é¢PDFã‚’ç”Ÿæˆ
3. Cloud Storageã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
4. `compliance_documents`ãƒ†ãƒ¼ãƒ–ãƒ«ã«è¨˜éŒ²

##### æ³¨æ–‡å–å¾—ï¼ˆå˜ä¸€ï¼‰

```
GET /api/orders/{order_id}?tenant_id={tenant_id}
```

**èªè¨¼**: å¿…é ˆ  
**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: `200 OK`
```json
{
  "id": "order-001",
  "tenant_id": "tenant-123",
  "order_number": "ORD-2025-001",
  "customer_id": "customer-001",
  "customer": {
    "id": "customer-001",
    "name": "ç”°ä¸­ å¤ªéƒ",
    "email": "tanaka@example.com"
  },
  "status": "CONFIRMED",
  "order_items": [
    {
      "id": "item-001",
      "item_type": "SUIT",
      "fabric": {
        "id": "fabric-001",
        "brand": "V.B.C",
        "name": "Navy Blue"
      },
      "measurements": {
        "jacket_length": 72.5,
        "sleeve": 60.0,
        "chest": 100.0
      },
      "options": {
        "lapel": "notch",
        "lining": "cupra_A"
      },
      "required_fabric_length": 3.2,
      "unit_price": 135000,
      "quantity": 1
    }
  ],
  "total_amount": 135000,
  "tax_amount": 13500,
  "tax_rate": 0.10,
  "delivery_due_date": "2025-12-31",
  "payment_due_date": "2026-03-01",
  "compliance_doc_url": "https://storage.googleapis.com/tailorcloud-docs/order-001-initial.pdf",
  "compliance_doc_hash": "sha256:abc123...",
  "created_at": "2025-01-01T00:00:00Z",
  "updated_at": "2025-01-01T00:05:00Z",
  "created_by": "user-001"
}
```

##### æ³¨æ–‡ä¸€è¦§å–å¾—

```
GET /api/orders?tenant_id={tenant_id}&page=1&limit=20&status={status}
```

**èªè¨¼**: å¿…é ˆ  
**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- `tenant_id` (å¿…é ˆ): ãƒ†ãƒŠãƒ³ãƒˆID
- `page` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): ãƒšãƒ¼ã‚¸ç•ªå·ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1ï¼‰
- `limit` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): 1ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®ä»¶æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 20ï¼‰
- `status` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆDRAFT, CONFIRMED, PAID, CANCELLEDï¼‰
- `customer_id` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): é¡§å®¢IDã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: `200 OK`
```json
{
  "orders": [
    {
      "id": "order-001",
      "order_number": "ORD-2025-001",
      "customer": {
        "id": "customer-001",
        "name": "ç”°ä¸­ å¤ªéƒ"
      },
      "status": "CONFIRMED",
      "total_amount": 135000,
      "delivery_due_date": "2025-12-31",
      "created_at": "2025-01-01T00:00:00Z"
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 50,
    "total_pages": 3
  }
}
```

##### ä¿®æ­£ç™ºæ³¨æ›¸ç”Ÿæˆ

```
POST /api/orders/{order_id}/generate-amendment
```

**èªè¨¼**: å¿…é ˆï¼ˆOwner/Staffï¼‰  
**ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£**:
```json
{
  "amendment_reason": "ç´æœŸå¤‰æ›´ã®ãŸã‚",
  "changes": {
    "delivery_due_date": "2026-01-15"
  }
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: `200 OK`
```json
{
  "order_id": "order-001",
  "document_id": "doc-002",
  "document_type": "AMENDMENT",
  "parent_document_id": "doc-001",
  "pdf_url": "https://storage.googleapis.com/tailorcloud-docs/order-001-amendment.pdf",
  "pdf_hash": "sha256:def456...",
  "generated_at": "2025-01-01T01:00:00Z"
}
```

---

#### 2.2.4 ç”Ÿåœ°ç®¡ç†

##### ç”Ÿåœ°ä¸€è¦§å–å¾—

```
GET /api/fabrics?tenant_id={tenant_id}&status={status}&search={keyword}
```

**èªè¨¼**: å¿…é ˆ  
**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- `tenant_id` (å¿…é ˆ): ãƒ†ãƒŠãƒ³ãƒˆID
- `status` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): åœ¨åº«ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆAvailable, Limited, SoldOutï¼‰
- `search` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆãƒ–ãƒ©ãƒ³ãƒ‰åã€ç”Ÿåœ°åã€SKUï¼‰
- `page` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): ãƒšãƒ¼ã‚¸ç•ªå·
- `limit` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³): 1ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®ä»¶æ•°

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: `200 OK`
```json
{
  "fabrics": [
    {
      "id": "fabric-001",
      "tenant_id": "tenant-123",
      "sku": "VBC-001-NV",
      "brand": "V.B.C",
      "name": "Navy Blue",
      "composition": "Wool 100%",
      "cost_price": 50000,
      "sales_price": 135000,
      "image_url": "https://storage.googleapis.com/tailorcloud-fabrics/vbc-001-nv.jpg",
      "is_active": true,
      "created_at": "2025-01-01T00:00:00Z"
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 100,
    "total_pages": 5
  }
}
```

##### ç”Ÿåœ°å–å¾—ï¼ˆå˜ä¸€ï¼‰

```
GET /api/fabrics/{fabric_id}?tenant_id={tenant_id}
```

**èªè¨¼**: å¿…é ˆ  
**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: `200 OK`
```json
{
  "id": "fabric-001",
  "tenant_id": "tenant-123",
  "sku": "VBC-001-NV",
  "brand": "V.B.C",
  "name": "Navy Blue",
  "composition": "Wool 100%",
  "cost_price": 50000,
  "sales_price": 135000,
  "image_url": "https://storage.googleapis.com/tailorcloud-fabrics/vbc-001-nv.jpg",
  "is_active": true,
  "created_at": "2025-01-01T00:00:00Z",
  "updated_at": "2025-01-01T00:00:00Z"
}
```

---

#### 2.2.5 ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹æ–‡æ›¸

##### ç™ºæ³¨æ›¸PDFãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

```
GET /api/compliance-documents/{document_id}/download?tenant_id={tenant_id}
```

**èªè¨¼**: å¿…é ˆ  
**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: `200 OK`
- Content-Type: `application/pdf`
- Content-Disposition: `attachment; filename="order-001-initial.pdf"`
- ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ï¼ˆPDFï¼‰

##### ç™ºæ³¨æ›¸å±¥æ­´å–å¾—

```
GET /api/orders/{order_id}/compliance-documents?tenant_id={tenant_id}
```

**èªè¨¼**: å¿…é ˆ  
**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: `200 OK`
```json
{
  "documents": [
    {
      "id": "doc-001",
      "order_id": "order-001",
      "document_type": "INITIAL",
      "pdf_url": "https://storage.googleapis.com/tailorcloud-docs/order-001-initial.pdf",
      "pdf_hash": "sha256:abc123...",
      "generated_at": "2025-01-01T00:05:00Z",
      "generated_by": "user-001"
    },
    {
      "id": "doc-002",
      "order_id": "order-001",
      "document_type": "AMENDMENT",
      "parent_document_id": "doc-001",
      "amendment_reason": "ç´æœŸå¤‰æ›´ã®ãŸã‚",
      "pdf_url": "https://storage.googleapis.com/tailorcloud-docs/order-001-amendment.pdf",
      "pdf_hash": "sha256:def456...",
      "generated_at": "2025-01-01T01:00:00Z",
      "generated_by": "user-001"
    }
  ]
}
```

---

### 2.3 ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹

ã™ã¹ã¦ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ä»¥ä¸‹ã®å½¢å¼ã®ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã—ã¾ã™ï¼š

```json
{
  "error": {
    "code": "ERROR_CODE",
    "message": "ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆæ—¥æœ¬èªï¼‰",
    "details": {}
  }
}
```

**HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰**:
- `400 Bad Request`: ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒä¸æ­£
- `401 Unauthorized`: èªè¨¼ãŒå¿…è¦
- `403 Forbidden`: æ¨©é™ãŒä¸è¶³
- `404 Not Found`: ãƒªã‚½ãƒ¼ã‚¹ãŒè¦‹ã¤ã‹ã‚‰ãªã„
- `500 Internal Server Error`: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼

**ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ä¾‹**:
- `INVALID_REQUEST`: ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒä¸æ­£
- `UNAUTHORIZED`: èªè¨¼ãŒå¿…è¦
- `FORBIDDEN`: æ¨©é™ãŒä¸è¶³
- `NOT_FOUND`: ãƒªã‚½ãƒ¼ã‚¹ãŒè¦‹ã¤ã‹ã‚‰ãªã„
- `TENANT_MISMATCH`: ãƒ†ãƒŠãƒ³ãƒˆIDãŒä¸€è‡´ã—ãªã„
- `ORDER_STATUS_INVALID`: æ³¨æ–‡ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒä¸æ­£
- `INTERNAL_ERROR`: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼

---

## 3. ç”»é¢é·ç§»å›³

### 3.1 å…¨ä½“ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TailorCloud MVP ç”»é¢é·ç§»å›³                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢]
    â”‚
    â”œâ”€ Firebaseèªè¨¼
    â”‚
    â–¼
[ãƒ›ãƒ¼ãƒ ç”»é¢ï¼ˆDashboardï¼‰]
    â”‚
    â”œâ”€ [é¡§å®¢ä¸€è¦§] â”€â”€â†’ [é¡§å®¢è©³ç´°] â”€â”€â†’ [é¡§å®¢ç·¨é›†]
    â”‚
    â”œâ”€ [ç”Ÿåœ°ä¸€è¦§] â”€â”€â†’ [ç”Ÿåœ°è©³ç´°]
    â”‚
    â”œâ”€ [æ³¨æ–‡ä¸€è¦§] â”€â”€â†’ [æ³¨æ–‡è©³ç´°] â”€â”€â†’ [ç™ºæ³¨æ›¸PDFè¡¨ç¤º]
    â”‚
    â””â”€ [ã‚¯ã‚¤ãƒƒã‚¯ç™ºæ³¨] â”€â”€â†’ [ã‚¹ãƒ†ãƒƒãƒ—1: é¡§å®¢é¸æŠ]
                            â”‚
                            â”œâ”€ [æ—¢å­˜é¡§å®¢é¸æŠ]
                            â”‚
                            â””â”€ [æ–°è¦é¡§å®¢ç™»éŒ²]
                            â”‚
                            â–¼
                        [ã‚¹ãƒ†ãƒƒãƒ—2: ç”Ÿåœ°é¸æŠ]
                            â”‚
                            â–¼
                        [ã‚¹ãƒ†ãƒƒãƒ—3: æ³¨æ–‡æƒ…å ±å…¥åŠ›]
                            â”‚
                            â”œâ”€ é‡‘é¡å…¥åŠ›
                            â”œâ”€ ç´æœŸå…¥åŠ›
                            â”œâ”€ æ¡å¯¸ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ï¼ˆç°¡æ˜“ï¼‰
                            â”‚
                            â–¼
                        [æ³¨æ–‡ç¢ºèªç”»é¢]
                            â”‚
                            â”œâ”€ [ä¿å­˜ï¼ˆDraftï¼‰]
                            â”‚
                            â””â”€ [ç¢ºå®šï¼ˆç™ºæ³¨æ›¸ç”Ÿæˆï¼‰]
                                â”‚
                                â–¼
                            [ç™ºæ³¨æ›¸PDFè¡¨ç¤º]
```

### 3.2 ç”»é¢è©³ç´°

#### 3.2.1 ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/screens/auth/login_screen.dart`

**æ©Ÿèƒ½**:
- Firebase Authenticationã«ã‚ˆã‚‹ãƒ¡ãƒ¼ãƒ«/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆèªè¨¼å¤±æ•—æ™‚ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºï¼‰

**UIè¦ç´ **:
- ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
- ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã‚¨ãƒªã‚¢

**é·ç§»å…ˆ**:
- èªè¨¼æˆåŠŸ â†’ ãƒ›ãƒ¼ãƒ ç”»é¢

---

#### 3.2.2 ãƒ›ãƒ¼ãƒ ç”»é¢ï¼ˆDashboardï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/screens/home/home_screen.dart`

**æ©Ÿèƒ½**:
- KPIè¡¨ç¤ºï¼ˆä»Šæ—¥ã®å£²ä¸Šã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ³¨æ–‡æ•°ï¼‰
- ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆã‚¯ã‚¤ãƒƒã‚¯ç™ºæ³¨ã€é¡§å®¢ç™»éŒ²ï¼‰
- æœ€è¿‘ã®æ³¨æ–‡ä¸€è¦§ï¼ˆ5ä»¶ï¼‰

**UIè¦ç´ **:
- KPIã‚«ãƒ¼ãƒ‰ï¼ˆå£²ä¸Šã€æ³¨æ–‡æ•°ï¼‰
- ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³
- æœ€è¿‘ã®æ³¨æ–‡ãƒªã‚¹ãƒˆ
- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ï¼ˆä¸‹éƒ¨ï¼‰

**é·ç§»å…ˆ**:
- é¡§å®¢ä¸€è¦§
- ç”Ÿåœ°ä¸€è¦§
- æ³¨æ–‡ä¸€è¦§
- ã‚¯ã‚¤ãƒƒã‚¯ç™ºæ³¨

---

#### 3.2.3 é¡§å®¢ä¸€è¦§ç”»é¢

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/screens/customers/customer_list_screen.dart`

**æ©Ÿèƒ½**:
- é¡§å®¢ä¸€è¦§è¡¨ç¤ºï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œï¼‰
- æ¤œç´¢æ©Ÿèƒ½ï¼ˆåå‰ã€ãƒ¡ãƒ¼ãƒ«ã€é›»è©±ç•ªå·ï¼‰
- æ–°è¦é¡§å®¢ç™»éŒ²ãƒœã‚¿ãƒ³

**UIè¦ç´ **:
- æ¤œç´¢ãƒãƒ¼
- é¡§å®¢ãƒªã‚¹ãƒˆï¼ˆã‚«ãƒ¼ãƒ‰å½¢å¼ï¼‰
- æ–°è¦ç™»éŒ²ãƒœã‚¿ãƒ³ï¼ˆFABï¼‰
- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

**é·ç§»å…ˆ**:
- é¡§å®¢è©³ç´°ç”»é¢
- æ–°è¦é¡§å®¢ç™»éŒ²ç”»é¢

---

#### 3.2.4 é¡§å®¢è©³ç´°ç”»é¢

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/screens/customers/customer_detail_screen.dart`

**æ©Ÿèƒ½**:
- é¡§å®¢æƒ…å ±è¡¨ç¤º
- é¡§å®¢ã®æ³¨æ–‡å±¥æ­´ä¸€è¦§
- ç·¨é›†ãƒ»å‰Šé™¤ãƒœã‚¿ãƒ³

**UIè¦ç´ **:
- é¡§å®¢æƒ…å ±ã‚«ãƒ¼ãƒ‰ï¼ˆåå‰ã€ãƒ¡ãƒ¼ãƒ«ã€é›»è©±ã€ä½æ‰€ï¼‰
- æ³¨æ–‡å±¥æ­´ãƒªã‚¹ãƒˆ
- ç·¨é›†ãƒœã‚¿ãƒ³
- å‰Šé™¤ãƒœã‚¿ãƒ³ï¼ˆOwnerã®ã¿ï¼‰

**é·ç§»å…ˆ**:
- é¡§å®¢ç·¨é›†ç”»é¢
- æ³¨æ–‡è©³ç´°ç”»é¢

---

#### 3.2.5 æ–°è¦é¡§å®¢ç™»éŒ²ç”»é¢

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/screens/customers/customer_create_screen.dart`

**æ©Ÿèƒ½**:
- æ–°è¦é¡§å®¢æƒ…å ±å…¥åŠ›
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå¿…é ˆé …ç›®ãƒã‚§ãƒƒã‚¯ï¼‰

**UIè¦ç´ **:
- åå‰å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼ˆå¿…é ˆï¼‰
- ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
- é›»è©±ç•ªå·å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
- ä½æ‰€å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
- ä¿å­˜ãƒœã‚¿ãƒ³
- ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³

**é·ç§»å…ˆ**:
- ä¿å­˜æˆåŠŸ â†’ é¡§å®¢è©³ç´°ç”»é¢
- ã‚­ãƒ£ãƒ³ã‚»ãƒ« â†’ å‰ã®ç”»é¢ã«æˆ»ã‚‹

---

#### 3.2.6 ç”Ÿåœ°ä¸€è¦§ç”»é¢

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/screens/inventory/inventory_screen.dart`

**æ©Ÿèƒ½**:
- ç”Ÿåœ°ä¸€è¦§è¡¨ç¤ºï¼ˆã‚°ãƒªãƒƒãƒ‰å½¢å¼ï¼‰
- æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½
- åœ¨åº«ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºï¼ˆAvailable/Limited/SoldOutï¼‰

**UIè¦ç´ **:
- æ¤œç´¢ãƒãƒ¼
- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒœã‚¿ãƒ³ï¼ˆãƒ–ãƒ©ãƒ³ãƒ‰ã€åœ¨åº«ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼‰
- ç”Ÿåœ°ã‚«ãƒ¼ãƒ‰ï¼ˆç”»åƒã€ãƒ–ãƒ©ãƒ³ãƒ‰ã€åå‰ã€ä¾¡æ ¼ã€åœ¨åº«ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼‰
- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³

**é·ç§»å…ˆ**:
- ç”Ÿåœ°è©³ç´°ç”»é¢

---

#### 3.2.7 æ³¨æ–‡ä¸€è¦§ç”»é¢

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/screens/orders/order_list_screen.dart`

**æ©Ÿèƒ½**:
- æ³¨æ–‡ä¸€è¦§è¡¨ç¤ºï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œï¼‰
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆDraft, Confirmed, Paid, Cancelledï¼‰
- é¡§å®¢åã§ã®æ¤œç´¢

**UIè¦ç´ **:
- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚¿ãƒ–
- æ¤œç´¢ãƒãƒ¼
- æ³¨æ–‡ãƒªã‚¹ãƒˆï¼ˆã‚«ãƒ¼ãƒ‰å½¢å¼ï¼šæ³¨æ–‡ç•ªå·ã€é¡§å®¢åã€é‡‘é¡ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã€ç´æœŸï¼‰
- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³

**é·ç§»å…ˆ**:
- æ³¨æ–‡è©³ç´°ç”»é¢

---

#### 3.2.8 æ³¨æ–‡è©³ç´°ç”»é¢

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/screens/orders/order_detail_screen.dart`

**æ©Ÿèƒ½**:
- æ³¨æ–‡æƒ…å ±è¡¨ç¤º
- æ³¨æ–‡æ˜ç´°è¡¨ç¤º
- ç™ºæ³¨æ›¸PDFè¡¨ç¤ºãƒœã‚¿ãƒ³
- æ³¨æ–‡ç¢ºå®šãƒœã‚¿ãƒ³ï¼ˆDraftã®å ´åˆï¼‰
- ä¿®æ­£ç™ºæ³¨æ›¸ç”Ÿæˆãƒœã‚¿ãƒ³ï¼ˆConfirmedã®å ´åˆï¼‰

**UIè¦ç´ **:
- æ³¨æ–‡æƒ…å ±ã‚«ãƒ¼ãƒ‰ï¼ˆæ³¨æ–‡ç•ªå·ã€é¡§å®¢åã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã€é‡‘é¡ã€ç´æœŸã€æ”¯æ‰•æœŸæ—¥ï¼‰
- æ³¨æ–‡æ˜ç´°ãƒªã‚¹ãƒˆ
- ç™ºæ³¨æ›¸PDFè¡¨ç¤ºãƒœã‚¿ãƒ³
- æ³¨æ–‡ç¢ºå®šãƒœã‚¿ãƒ³ï¼ˆDraftã®å ´åˆï¼‰
- ä¿®æ­£ç™ºæ³¨æ›¸ç”Ÿæˆãƒœã‚¿ãƒ³ï¼ˆConfirmedã®å ´åˆï¼‰

**é·ç§»å…ˆ**:
- ç™ºæ³¨æ›¸PDFè¡¨ç¤ºç”»é¢
- æ³¨æ–‡ç¢ºå®šç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
- ä¿®æ­£ç™ºæ³¨æ›¸ç”Ÿæˆç”»é¢

---

#### 3.2.9 ã‚¯ã‚¤ãƒƒã‚¯ç™ºæ³¨ç”»é¢ï¼ˆ3ã‚¹ãƒ†ãƒƒãƒ—ï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/screens/orders/quick_order_screen.dart`

##### ã‚¹ãƒ†ãƒƒãƒ—1: é¡§å®¢é¸æŠ

**æ©Ÿèƒ½**:
- æ—¢å­˜é¡§å®¢é¸æŠ
- æ–°è¦é¡§å®¢ç™»éŒ²

**UIè¦ç´ **:
- é¡§å®¢æ¤œç´¢ãƒãƒ¼
- é¡§å®¢ãƒªã‚¹ãƒˆï¼ˆé¸æŠå¯èƒ½ï¼‰
- æ–°è¦é¡§å®¢ç™»éŒ²ãƒœã‚¿ãƒ³
- æ¬¡ã¸ãƒœã‚¿ãƒ³ï¼ˆé¡§å®¢é¸æŠå¾Œï¼‰

**é·ç§»å…ˆ**:
- æ–°è¦é¡§å®¢ç™»éŒ²ç”»é¢ï¼ˆæ–°è¦ç™»éŒ²ã®å ´åˆï¼‰
- ã‚¹ãƒ†ãƒƒãƒ—2ï¼ˆæ—¢å­˜é¡§å®¢é¸æŠå¾Œï¼‰

---

##### ã‚¹ãƒ†ãƒƒãƒ—2: ç”Ÿåœ°é¸æŠ

**æ©Ÿèƒ½**:
- ç”Ÿåœ°ä¸€è¦§è¡¨ç¤º
- ç”Ÿåœ°é¸æŠ

**UIè¦ç´ **:
- ç”Ÿåœ°æ¤œç´¢ãƒãƒ¼
- ç”Ÿåœ°ã‚°ãƒªãƒƒãƒ‰ï¼ˆé¸æŠå¯èƒ½ï¼‰
- é¸æŠã—ãŸç”Ÿåœ°ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
- æ¬¡ã¸ãƒœã‚¿ãƒ³ï¼ˆç”Ÿåœ°é¸æŠå¾Œï¼‰
- æˆ»ã‚‹ãƒœã‚¿ãƒ³

**é·ç§»å…ˆ**:
- ã‚¹ãƒ†ãƒƒãƒ—1ï¼ˆæˆ»ã‚‹ï¼‰
- ã‚¹ãƒ†ãƒƒãƒ—3ï¼ˆæ¬¡ã¸ï¼‰

---

##### ã‚¹ãƒ†ãƒƒãƒ—3: æ³¨æ–‡æƒ…å ±å…¥åŠ›

**æ©Ÿèƒ½**:
- é‡‘é¡å…¥åŠ›
- ç´æœŸå…¥åŠ›ï¼ˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼é¸æŠï¼‰
- æ¡å¯¸ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ï¼ˆç°¡æ˜“ç‰ˆï¼šä¸»è¦å¯¸æ³•ã®ã¿ï¼‰
- ä»•æ§˜ã‚ªãƒ—ã‚·ãƒ§ãƒ³é¸æŠï¼ˆç°¡æ˜“ç‰ˆï¼‰

**UIè¦ç´ **:
- é‡‘é¡å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
- ç´æœŸé¸æŠï¼ˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼‰
- æ¡å¯¸ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ï¼ˆä¸»è¦å¯¸æ³•ï¼šã‚¸ãƒ£ã‚±ãƒƒãƒˆé•·ã€è¢–é•·ã€èƒ¸å›²ï¼‰
- ä»•æ§˜ã‚ªãƒ—ã‚·ãƒ§ãƒ³é¸æŠï¼ˆãƒ©ãƒšãƒ«ã€è£åœ°ï¼‰
- ä¿å­˜ãƒœã‚¿ãƒ³ï¼ˆDraftã¨ã—ã¦ä¿å­˜ï¼‰
- ç¢ºå®šãƒœã‚¿ãƒ³ï¼ˆç™ºæ³¨æ›¸ç”Ÿæˆï¼‰

**é·ç§»å…ˆ**:
- ã‚¹ãƒ†ãƒƒãƒ—2ï¼ˆæˆ»ã‚‹ï¼‰
- æ³¨æ–‡ç¢ºèªç”»é¢ï¼ˆä¿å­˜/ç¢ºå®šå¾Œï¼‰

---

##### æ³¨æ–‡ç¢ºèªç”»é¢

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/screens/orders/order_confirm_screen.dart`

**æ©Ÿèƒ½**:
- æ³¨æ–‡æƒ…å ±ã®æœ€çµ‚ç¢ºèª
- ç™ºæ³¨æ›¸ç”Ÿæˆ

**UIè¦ç´ **:
- é¡§å®¢æƒ…å ±è¡¨ç¤º
- ç”Ÿåœ°æƒ…å ±è¡¨ç¤º
- æ³¨æ–‡æƒ…å ±è¡¨ç¤ºï¼ˆé‡‘é¡ã€ç´æœŸã€æ”¯æ‰•æœŸæ—¥ï¼‰
- æ¡å¯¸ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º
- ç¢ºå®šãƒœã‚¿ãƒ³ï¼ˆç™ºæ³¨æ›¸ç”Ÿæˆï¼‰
- æˆ»ã‚‹ãƒœã‚¿ãƒ³

**é·ç§»å…ˆ**:
- ã‚¹ãƒ†ãƒƒãƒ—3ï¼ˆæˆ»ã‚‹ï¼‰
- ç™ºæ³¨æ›¸PDFè¡¨ç¤ºç”»é¢ï¼ˆç¢ºå®šå¾Œï¼‰

---

#### 3.2.10 ç™ºæ³¨æ›¸PDFè¡¨ç¤ºç”»é¢

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/screens/orders/compliance_document_screen.dart`

**æ©Ÿèƒ½**:
- ç™ºæ³¨æ›¸PDFè¡¨ç¤ºï¼ˆWebViewï¼‰
- PDFãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
- ç™ºæ³¨æ›¸å±¥æ­´è¡¨ç¤º

**UIè¦ç´ **:
- PDFè¡¨ç¤ºã‚¨ãƒªã‚¢ï¼ˆWebViewï¼‰
- ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³
- å±¥æ­´ãƒœã‚¿ãƒ³ï¼ˆä¿®æ­£ç™ºæ³¨æ›¸ä¸€è¦§ï¼‰
- é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³

**é·ç§»å…ˆ**:
- æ³¨æ–‡è©³ç´°ç”»é¢ï¼ˆé–‰ã˜ã‚‹ï¼‰

---

### 3.3 ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ§‹é€ 

**Bottom Navigation Bar**ï¼ˆãƒ›ãƒ¼ãƒ ç”»é¢ã€é¡§å®¢ä¸€è¦§ã€ç”Ÿåœ°ä¸€è¦§ã€æ³¨æ–‡ä¸€è¦§ï¼‰:
- ãƒ›ãƒ¼ãƒ 
- é¡§å®¢
- ç”Ÿåœ°
- æ³¨æ–‡

**App Bar**:
- ç”»é¢ã‚¿ã‚¤ãƒˆãƒ«
- æ¤œç´¢ãƒœã‚¿ãƒ³ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
- è¨­å®šãƒœã‚¿ãƒ³ï¼ˆå°†æ¥å®Ÿè£…ï¼‰

---

## 4. ã‚¤ãƒ³ãƒ•ãƒ©æ§‹æˆå›³

### 4.1 å…¨ä½“æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TailorCloud MVP ã‚¤ãƒ³ãƒ•ãƒ©æ§‹æˆ                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Client Layer (ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå±¤)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Flutter App    â”‚              â”‚   Web Portal     â”‚      â”‚
â”‚  â”‚  (Mobile/Tablet)â”‚              â”‚   (Future)       â”‚      â”‚
â”‚  â”‚                 â”‚              â”‚                  â”‚      â”‚
â”‚  â”‚ - iOS           â”‚              â”‚ - React          â”‚      â”‚
â”‚  â”‚ - Android       â”‚              â”‚ - Tailwind CSS   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚           â”‚                                 â”‚                â”‚
â”‚           â”‚ HTTPS/REST API                  â”‚                â”‚
â”‚           â”‚ (Firebase Auth JWT)              â”‚                â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                        â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API Layer (APIå±¤)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚      Backend API (Go)                      â”‚              â”‚
â”‚  â”‚      - Cloud Run (Serverless)              â”‚              â”‚
â”‚  â”‚      - Auto Scaling (0-10 instances)       â”‚              â”‚
â”‚  â”‚      - HTTPS Only                          â”‚              â”‚
â”‚  â”‚                                            â”‚              â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚              â”‚
â”‚  â”‚  â”‚  Authentication Middleware           â”‚  â”‚              â”‚
â”‚  â”‚  â”‚  - Firebase Auth JWT Verification    â”‚  â”‚              â”‚
â”‚  â”‚  â”‚  - RBAC (Role-Based Access Control)  â”‚  â”‚              â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚              â”‚
â”‚  â”‚                                            â”‚              â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚              â”‚
â”‚  â”‚  â”‚  Business Logic Layer                â”‚  â”‚              â”‚
â”‚  â”‚  â”‚  - Order Service                     â”‚  â”‚              â”‚
â”‚  â”‚  â”‚  - Customer Service                  â”‚  â”‚              â”‚
â”‚  â”‚  â”‚  - Compliance Service               â”‚  â”‚              â”‚
â”‚  â”‚  â”‚  - PDF Generation Service            â”‚  â”‚              â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚              â”‚
â”‚  â”‚                                            â”‚              â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚              â”‚
â”‚  â”‚  â”‚  Repository Layer                    â”‚  â”‚              â”‚
â”‚  â”‚  â”‚  - PostgreSQL Repository             â”‚  â”‚              â”‚
â”‚  â”‚  â”‚  - Cloud Storage Repository          â”‚  â”‚              â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚              â”‚
â”‚  â”‚                                            â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                â”‚                 â”‚                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Data Layer (ãƒ‡ãƒ¼ã‚¿å±¤)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                â”‚                 â”‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚   PostgreSQL          â”‚  â”‚  Cloud       â”‚              â”‚
â”‚  â”‚   (Cloud SQL)         â”‚  â”‚  Storage     â”‚              â”‚
â”‚  â”‚                       â”‚  â”‚              â”‚              â”‚
â”‚  â”‚ - Primary Database    â”‚  â”‚ - PDF        â”‚              â”‚
â”‚  â”‚ - Multi-Tenant        â”‚  â”‚   Documents  â”‚              â”‚
â”‚  â”‚ - ACID Compliance     â”‚  â”‚ - Images     â”‚              â”‚
â”‚  â”‚                       â”‚  â”‚              â”‚              â”‚
â”‚  â”‚ Connection Pool:      â”‚  â”‚ Bucket:      â”‚              â”‚
â”‚  â”‚ - Min: 5              â”‚  â”‚ tailorcloud- â”‚              â”‚
â”‚  â”‚ - Max: 20             â”‚  â”‚   docs       â”‚              â”‚
â”‚  â”‚                       â”‚  â”‚              â”‚              â”‚
â”‚  â”‚ Backup:               â”‚  â”‚ Access:      â”‚              â”‚
â”‚  â”‚ - Daily (7 days)      â”‚  â”‚ - Private    â”‚              â”‚
â”‚  â”‚ - Weekly (4 weeks)    â”‚  â”‚ - Signed URL â”‚              â”‚
â”‚  â”‚                       â”‚  â”‚   (24h TTL)  â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                â”‚                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Authentication & External Services                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                â”‚                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚  â”‚  Firebase              â”‚                               â”‚
â”‚  â”‚  Authentication        â”‚                               â”‚
â”‚  â”‚                        â”‚                               â”‚
â”‚  â”‚ - Email/Password       â”‚                               â”‚
â”‚  â”‚ - JWT Token            â”‚                               â”‚
â”‚  â”‚ - User Management      â”‚                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯è©³ç´°

#### 4.2.1 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

**ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: Google Cloud Run

**ç†ç”±**:
- ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ã§é‹ç”¨ã‚³ã‚¹ãƒˆãŒä½ã„ï¼ˆãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°ã«å¿œã˜ãŸèª²é‡‘ï¼‰
- è‡ªå‹•ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ï¼ˆ0ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‹ã‚‰é–‹å§‹å¯èƒ½ï¼‰
- HTTPSå¯¾å¿œï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
- ã‚³ãƒ³ãƒ†ãƒŠãƒ™ãƒ¼ã‚¹ã§ãƒ‡ãƒ—ãƒ­ã‚¤ãŒç°¡å˜

**è¨­å®š**:
- **CPU**: 1 vCPU
- **ãƒ¡ãƒ¢ãƒª**: 512 MBï¼ˆMVPã§ã¯ååˆ†ï¼‰
- **æœ€å¤§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹æ•°**: 10
- **æœ€å°ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹æ•°**: 0ï¼ˆã‚³ã‚¹ãƒˆå‰Šæ¸›ï¼‰
- **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ**: 300ç§’

**ç’°å¢ƒå¤‰æ•°**:
```bash
PORT=8080
POSTGRES_HOST=<Cloud SQLæ¥ç¶šå>
POSTGRES_USER=<ãƒ¦ãƒ¼ã‚¶ãƒ¼å>
POSTGRES_PASSWORD=<ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰>
POSTGRES_DB=tailorcloud
GCP_PROJECT_ID=<ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID>
GCS_BUCKET_NAME=tailorcloud-docs
FIREBASE_PROJECT_ID=<Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID>
```

---

#### 4.2.2 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

**ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: Google Cloud SQL (PostgreSQL)

**ç†ç”±**:
- ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã§é‹ç”¨ãŒç°¡å˜
- è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
- é«˜å¯ç”¨æ€§ï¼ˆå°†æ¥ã®æ‹¡å¼µã«å¯¾å¿œï¼‰
- Cloud Runã¨ã®çµ±åˆãŒå®¹æ˜“

**è¨­å®š**:
- **ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—**: db-f1-microï¼ˆé–‹ç™ºç’°å¢ƒï¼‰ã€db-n1-standard-1ï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: 20 GBï¼ˆSSDï¼‰
- **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: æœ‰åŠ¹ï¼ˆ7æ—¥é–“ã®æ—¥æ¬¡ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã€4é€±é–“ã®é€±æ¬¡ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼‰
- **æ¥ç¶š**: Cloud SQL ProxyçµŒç”±ï¼ˆã‚»ã‚­ãƒ¥ã‚¢ï¼‰

**æ¥ç¶šãƒ—ãƒ¼ãƒ«è¨­å®š**:
- **æœ€å°æ¥ç¶šæ•°**: 5
- **æœ€å¤§æ¥ç¶šæ•°**: 20
- **æ¥ç¶šã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ**: 30ç§’

---

#### 4.2.3 ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸

**ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: Google Cloud Storage

**ç†ç”±**:
- ä½ã‚³ã‚¹ãƒˆï¼ˆGBã‚ãŸã‚Šã®æ–™é‡‘ãŒå®‰ã„ï¼‰
- é«˜ã„å¯ç”¨æ€§ï¼ˆ99.99%ï¼‰
- ç½²åä»˜ãURLã§ã‚»ã‚­ãƒ¥ã‚¢ãªã‚¢ã‚¯ã‚»ã‚¹
- ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ç®¡ç†ï¼ˆå¤ã„ãƒ•ã‚¡ã‚¤ãƒ«ã®è‡ªå‹•å‰Šé™¤ï¼‰

**è¨­å®š**:
- **ãƒã‚±ãƒƒãƒˆå**: `tailorcloud-docs`
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¯ãƒ©ã‚¹**: Standardï¼ˆé »ç¹ã«ã‚¢ã‚¯ã‚»ã‚¹ï¼‰
- **ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**: Privateï¼ˆç½²åä»˜ãURLã§ã‚¢ã‚¯ã‚»ã‚¹ï¼‰
- **ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«**: 5å¹´å¾Œã«è‡ªå‹•å‰Šé™¤ï¼ˆã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹æ–‡æ›¸ã®ä¿å­˜æœŸé–“ï¼‰

**ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ **:
```
tailorcloud-docs/
â”œâ”€â”€ orders/
â”‚   â”œâ”€â”€ {order_id}/
â”‚   â”‚   â”œâ”€â”€ initial.pdf
â”‚   â”‚   â””â”€â”€ amendment-{version}.pdf
â””â”€â”€ fabrics/
    â””â”€â”€ {fabric_id}.jpg
```

---

#### 4.2.4 èªè¨¼

**ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: Firebase Authentication

**ç†ç”±**:
- ç„¡æ–™æ ãŒå¤§ãã„ï¼ˆæœˆ50,000 MAUã¾ã§ç„¡æ–™ï¼‰
- JWTãƒˆãƒ¼ã‚¯ãƒ³ã«ã‚ˆã‚‹èªè¨¼ãŒç°¡å˜
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ãŒå®¹æ˜“
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãŒé«˜ã„

**è¨­å®š**:
- **èªè¨¼æ–¹æ³•**: Email/Password
- **JWTæœ‰åŠ¹æœŸé™**: 1æ™‚é–“
- **ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒˆãƒ¼ã‚¯ãƒ³**: 30æ—¥

---

#### 4.2.5 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

**ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: 
- **ãƒ¢ãƒã‚¤ãƒ«**: Flutterï¼ˆiOS/Androidï¼‰
- **Web**: React + Tailwind CSSï¼ˆå°†æ¥å®Ÿè£…ï¼‰

**ãƒ‡ãƒ—ãƒ­ã‚¤**:
- **iOS**: App Storeï¼ˆTestFlightçµŒç”±ã§ãƒ™ãƒ¼ã‚¿ãƒ†ã‚¹ãƒˆï¼‰
- **Android**: Google Play Storeï¼ˆå†…éƒ¨ãƒ†ã‚¹ãƒˆãƒˆãƒ©ãƒƒã‚¯ï¼‰
- **Web**: Vercelï¼ˆå°†æ¥å®Ÿè£…ï¼‰

---

### 4.3 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

#### 4.3.1 ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- **HTTPS Only**: ã™ã¹ã¦ã®é€šä¿¡ã‚’HTTPSã§æš—å·åŒ–
- **CORS**: è¨±å¯ã•ã‚ŒãŸã‚ªãƒªã‚¸ãƒ³ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- **Cloud SQL Proxy**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚’æš—å·åŒ–

#### 4.3.2 èªè¨¼ãƒ»èªå¯

- **Firebase Authentication**: JWTãƒˆãƒ¼ã‚¯ãƒ³ãƒ™ãƒ¼ã‚¹èªè¨¼
- **RBAC**: ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
- **ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆåˆ†é›¢**: ã™ã¹ã¦ã®ã‚¯ã‚¨ãƒªã§`tenant_id`ã«ã‚ˆã‚‹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

#### 4.3.3 ãƒ‡ãƒ¼ã‚¿ä¿è­·

- **æš—å·åŒ–**: ä¿å­˜æ™‚æš—å·åŒ–ï¼ˆCloud SQLã€Cloud Storageï¼‰
- **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆ7æ—¥é–“ã®æ—¥æ¬¡ã€4é€±é–“ã®é€±æ¬¡ï¼‰
- **ç›£æŸ»ãƒ­ã‚°**: ã™ã¹ã¦ã®æ“ä½œã‚’è¨˜éŒ²ï¼ˆå°†æ¥å®Ÿè£…ï¼‰

---

### 4.4 ç›£è¦–ãƒ»é‹ç”¨

#### 4.4.1 ãƒ­ã‚°

**ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: Google Cloud Logging

**è¨­å®š**:
- **ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«**: INFO, WARNING, ERROR
- **ä¿æŒæœŸé–“**: 30æ—¥ï¼ˆç„¡æ–™æ å†…ï¼‰
- **æ§‹é€ åŒ–ãƒ­ã‚°**: JSONå½¢å¼

#### 4.4.2 ãƒ¡ãƒˆãƒªã‚¯ã‚¹

**ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: Google Cloud Monitoring

**ç›£è¦–é …ç›®**:
- **ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°**: ç·ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°ã€ã‚¨ãƒ©ãƒ¼æ•°
- **ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãƒ¼**: å¹³å‡ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãƒ¼ã€P95ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãƒ¼
- **ã‚¨ãƒ©ãƒ¼ç‡**: ã‚¨ãƒ©ãƒ¼ç‡ï¼ˆ5%ä»¥ä¸Šã§ã‚¢ãƒ©ãƒ¼ãƒˆï¼‰
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š**: æ¥ç¶šæ•°ã€ä½¿ç”¨ä¸­æ¥ç¶šæ•°

#### 4.4.3 ã‚¢ãƒ©ãƒ¼ãƒˆ

**è¨­å®š**:
- **ã‚¨ãƒ©ãƒ¼ç‡**: 5%ä»¥ä¸Šã§ã‚¢ãƒ©ãƒ¼ãƒˆ
- **ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãƒ¼**: 1ç§’ä»¥ä¸Šã§ã‚¢ãƒ©ãƒ¼ãƒˆ
- **DBæ¥ç¶š**: 80%ä½¿ç”¨ã§ã‚¢ãƒ©ãƒ¼ãƒˆ

---

### 4.5 ã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Šï¼ˆæœˆé¡ï¼‰

**MVPæ®µéšï¼ˆ100åº—èˆ—ã€æœˆ1,000ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/åº—èˆ—ï¼‰**:

| ã‚µãƒ¼ãƒ“ã‚¹ | ä½¿ç”¨é‡ | æœˆé¡ã‚³ã‚¹ãƒˆ |
|---------|--------|-----------|
| Cloud Run | 100,000ãƒªã‚¯ã‚¨ã‚¹ãƒˆ | $0.40 |
| Cloud SQL (db-f1-micro) | 1ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ | $7.67 |
| Cloud Storage | 10 GB | $0.20 |
| Firebase Auth | 100 MAU | $0.00ï¼ˆç„¡æ–™æ å†…ï¼‰ |
| Cloud Logging | 10 GB | $0.00ï¼ˆç„¡æ–™æ å†…ï¼‰ |
| **åˆè¨ˆ** | | **ç´„ $8.27/æœˆ** |

**æœ¬ç•ªç’°å¢ƒï¼ˆ2,000åº—èˆ—ã€æœˆ10,000ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/åº—èˆ—ï¼‰**:

| ã‚µãƒ¼ãƒ“ã‚¹ | ä½¿ç”¨é‡ | æœˆé¡ã‚³ã‚¹ãƒˆ |
|---------|--------|-----------|
| Cloud Run | 20,000,000ãƒªã‚¯ã‚¨ã‚¹ãƒˆ | $80.00 |
| Cloud SQL (db-n1-standard-1) | 1ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ | $96.00 |
| Cloud Storage | 500 GB | $10.00 |
| Firebase Auth | 2,000 MAU | $0.00ï¼ˆç„¡æ–™æ å†…ï¼‰ |
| Cloud Logging | 100 GB | $50.00 |
| **åˆè¨ˆ** | | **ç´„ $236.00/æœˆ** |

---

### 4.6 ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆãƒ•ãƒ­ãƒ¼

#### 4.6.1 ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

```bash
# 1. Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰
docker build -t gcr.io/<PROJECT_ID>/tailorcloud-backend:latest .

# 2. Google Container Registryã«ãƒ—ãƒƒã‚·ãƒ¥
docker push gcr.io/<PROJECT_ID>/tailorcloud-backend:latest

# 3. Cloud Runã«ãƒ‡ãƒ—ãƒ­ã‚¤
gcloud run deploy tailorcloud-backend \
  --image gcr.io/<PROJECT_ID>/tailorcloud-backend:latest \
  --platform managed \
  --region asia-northeast1 \
  --allow-unauthenticated
```

#### 4.6.2 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆFlutterï¼‰

```bash
# 1. iOSãƒ“ãƒ«ãƒ‰
flutter build ios --release

# 2. Androidãƒ“ãƒ«ãƒ‰
flutter build apk --release
```

---

## 5. é–‹ç™ºã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆ1ãƒ¶æœˆï¼‰

### Week 1: åŸºç›¤æ§‹ç¯‰

- [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆGoã€Flutterï¼‰
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒä½œæˆï¼ˆPostgreSQLï¼‰
- [ ] èªè¨¼æ©Ÿèƒ½å®Ÿè£…ï¼ˆFirebase Authï¼‰
- [ ] åŸºæœ¬çš„ãªAPIå®Ÿè£…ï¼ˆé¡§å®¢ã€æ³¨æ–‡ã€ç”Ÿåœ°ï¼‰

### Week 2: ã‚³ã‚¢æ©Ÿèƒ½å®Ÿè£…

- [ ] æ³¨æ–‡ä½œæˆæ©Ÿèƒ½
- [ ] ç™ºæ³¨æ›¸PDFç”Ÿæˆæ©Ÿèƒ½ï¼ˆä¸‹è«‹æ³•å¯¾å¿œï¼‰
- [ ] é¡§å®¢ç®¡ç†ç”»é¢ï¼ˆFlutterï¼‰
- [ ] ç”Ÿåœ°ä¸€è¦§ç”»é¢ï¼ˆFlutterï¼‰

### Week 3: UIå®Ÿè£…

- [ ] ã‚¯ã‚¤ãƒƒã‚¯ç™ºæ³¨ç”»é¢ï¼ˆ3ã‚¹ãƒ†ãƒƒãƒ—ï¼‰
- [ ] æ³¨æ–‡ä¸€è¦§ãƒ»è©³ç´°ç”»é¢
- [ ] ç™ºæ³¨æ›¸PDFè¡¨ç¤ºæ©Ÿèƒ½
- [ ] ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…

### Week 4: ãƒ†ã‚¹ãƒˆãƒ»èª¿æ•´

- [ ] çµ±åˆãƒ†ã‚¹ãƒˆ
- [ ] UI/UXèª¿æ•´
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™

---

## 6. ã¾ã¨ã‚

ã“ã®æŠ€è¡“ä»•æ§˜æ›¸ã¯ã€TailorCloud MVPã®é–‹ç™ºã«å¿…è¦ãªã™ã¹ã¦ã®æƒ…å ±ã‚’ç¶²ç¾…ã—ã¦ã„ã¾ã™ã€‚

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**:
1. ã“ã®ä»•æ§˜æ›¸ã‚’åŸºã«é–‹ç™ºã‚’é–‹å§‹
2. é€±æ¬¡ã§é€²æ—ã‚’ç¢ºèªãƒ»èª¿æ•´
3. 1ãƒ¶æœˆå¾Œã«ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã‚’å®Œæˆã•ã›ã€çŸ¥ã‚Šåˆã„ã®ãƒ†ãƒ¼ãƒ©ãƒ¼10äººã«ãƒ†ã‚¹ãƒˆã—ã¦ã‚‚ã‚‰ã†
4. ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’åé›†ã—ã€LOIï¼ˆåˆ©ç”¨æ„å‘æ›¸ï¼‰ã‚’å–å¾—

**ç›®æ¨™**: 1ãƒ¶æœˆä»¥å†…ã«å®Ÿå‹™ã§ä½¿ãˆã‚‹ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã‚’å®Œæˆã•ã›ã€ã‚·ãƒ¼ãƒ‰èª¿é”ã®ææ–™ã¨ã™ã‚‹ã€‚

---

**æœ€çµ‚æ›´æ–°æ—¥**: 2025-01  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… MVPé–‹ç™ºæº–å‚™å®Œäº†

