# TailorCloud: å®Œå…¨ã‚·ã‚¹ãƒ†ãƒ ä»•æ§˜æ›¸

**ä½œæˆæ—¥**: 2025-01  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 2.0.0  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ã‚·ãƒ¼ãƒ‰èª¿é”ç”¨MVPå®Œæˆã€ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºæ©Ÿèƒ½å®Ÿè£…å®Œäº†

---

## ğŸ“‹ ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

TailorCloudã¯ã€ã‚ªãƒ¼ãƒ€ãƒ¼ã‚¹ãƒ¼ãƒ„æ¥­ç•Œå‘ã‘ã®**ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå‹ERPã‚·ã‚¹ãƒ†ãƒ **ã§ã™ã€‚

**æ ¸å¿ƒä¾¡å€¤**:
- **ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ä¿è­·æ³•å¯¾å¿œ**: ç™ºæ³¨æ›¸ã‚’ã‚¹ãƒãƒ›ã§3åˆ†ã§ä½œæˆ
- **ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºã‚°ãƒ¬ãƒ¼ãƒ‰**: 100åº—èˆ—Ã—10å·¥å ´Ã—å¹´é–“10ä¸‡ç™ºæ³¨ã«å¯¾å¿œ
- **æ³•è¦åˆ¶å®Œå…¨æº–æ‹ **: ä¸‹è«‹æ³•ã€ã‚¤ãƒ³ãƒœã‚¤ã‚¹åˆ¶åº¦ã€ç›£æŸ»ãƒ­ã‚°å¯¾å¿œ

**æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**:
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Go 1.21+, PostgreSQL, Firestore
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: Flutter 3.16+, Dart
- **ã‚¤ãƒ³ãƒ•ãƒ©**: Google Cloud Platform (Cloud Run, Cloud SQL, Cloud Storage)

---

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### å…¨ä½“æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TailorCloud System                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Flutter App    â”‚              â”‚   Web Portal     â”‚      â”‚
â”‚  â”‚  (Mobile/Tablet)â”‚              â”‚   (Future)       â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚           â”‚                                 â”‚                â”‚
â”‚           â”‚ HTTPS/REST API                  â”‚                â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                        â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚      Backend API (Go)                      â”‚              â”‚
â”‚  â”‚      - Authentication (Firebase Auth)      â”‚              â”‚
â”‚  â”‚      - Business Logic                      â”‚              â”‚
â”‚  â”‚      - Compliance Engine                   â”‚              â”‚
â”‚  â”‚      - PDF Generation                      â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                â”‚                 â”‚                          â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚      â”‚   PostgreSQL      â”‚  â”‚  Firestore   â”‚              â”‚
â”‚      â”‚   (Primary DB)    â”‚  â”‚ (Secondary)  â”‚              â”‚
â”‚      â”‚                   â”‚  â”‚              â”‚              â”‚
â”‚      â”‚ - Orders          â”‚  â”‚ - Chat Logs  â”‚              â”‚
â”‚      â”‚ - Customers       â”‚  â”‚ - UI Status  â”‚              â”‚
â”‚      â”‚ - Fabrics         â”‚  â”‚ - Notificationsâ”‚            â”‚
â”‚      â”‚ - Audit Logs      â”‚  â”‚              â”‚              â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                â”‚                                           â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚      â”‚  Cloud Storage    â”‚                               â”‚
â”‚      â”‚  (PDF Documents)  â”‚                               â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

- **è¨€èª**: Go 1.21+
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆnet/httpï¼‰
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**:
  - **PostgreSQL** (Primary): æ³¨æ–‡ã€é¡§å®¢ã€åœ¨åº«ã€ç›£æŸ»ãƒ­ã‚°
  - **Firestore** (Secondary): ãƒãƒ£ãƒƒãƒˆã€UIçŠ¶æ…‹ã€é€šçŸ¥
- **èªè¨¼**: Firebase Authentication (JWT)
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: Google Cloud Storage (PDFä¿å­˜)
- **ç›£è¦–**: æ§‹é€ åŒ–ãƒ­ã‚°ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ã‚¢ãƒ©ãƒ¼ãƒˆ

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

- **è¨€èª**: Dart 3.2+
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Flutter 3.16+
- **çŠ¶æ…‹ç®¡ç†**: Riverpod
- **APIé€šä¿¡**: HTTP + JSON
- **ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: Hive (ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ)

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§

#### 1. tenants (ãƒ†ãƒŠãƒ³ãƒˆ)

ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆå¯¾å¿œã®ãƒ†ãƒŠãƒ³ãƒˆæƒ…å ±ã€‚

| ã‚«ãƒ©ãƒ å | å‹ | èª¬æ˜ |
|---------|-----|------|
| id | VARCHAR(50) PK | ãƒ†ãƒŠãƒ³ãƒˆID |
| type | VARCHAR(20) | Tailor / Factory |
| legal_name | VARCHAR(255) | æ³•äººå |
| address | TEXT | ä½æ‰€ |
| invoice_registration_no | VARCHAR(50) | ã‚¤ãƒ³ãƒœã‚¤ã‚¹ç™»éŒ²ç•ªå·ï¼ˆTç•ªå·ï¼‰ |
| tax_rounding_method | VARCHAR(20) | ç«¯æ•°å‡¦ç†æ–¹æ³•ï¼ˆHALF_UP/DOWN/UPï¼‰ |
| created_at | TIMESTAMPTZ | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMPTZ | æ›´æ–°æ—¥æ™‚ |

#### 2. customers (é¡§å®¢)

é¡§å®¢æƒ…å ±ï¼ˆCRMï¼‰ã€‚

| ã‚«ãƒ©ãƒ å | å‹ | èª¬æ˜ |
|---------|-----|------|
| id | VARCHAR(50) PK | é¡§å®¢ID |
| tenant_id | VARCHAR(50) FK | ãƒ†ãƒŠãƒ³ãƒˆID |
| name | VARCHAR(255) | é¡§å®¢å |
| name_kana | VARCHAR(255) | ã‚«ãƒŠå |
| email | VARCHAR(255) | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ |
| phone | VARCHAR(50) | é›»è©±ç•ªå· |
| address | TEXT | ä½æ‰€ |
| created_at | TIMESTAMPTZ | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMPTZ | æ›´æ–°æ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- `idx_customers_tenant_id` (tenant_id)
- `idx_customers_tenant_name` (tenant_id, name)

#### 3. orders (æ³¨æ–‡)

æ³¨æ–‡æƒ…å ±ï¼ˆã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹ã‚¨ãƒ³ã‚¸ãƒ³ã®ä¸­å¿ƒï¼‰ã€‚

| ã‚«ãƒ©ãƒ å | å‹ | èª¬æ˜ |
|---------|-----|------|
| id | VARCHAR(50) PK | æ³¨æ–‡ID |
| tenant_id | VARCHAR(50) FK | ãƒ†ãƒŠãƒ³ãƒˆID |
| customer_id | VARCHAR(50) FK | é¡§å®¢ID |
| fabric_id | VARCHAR(50) FK | ç”Ÿåœ°ID |
| status | VARCHAR(20) | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆDraft/Confirmed/...ï¼‰ |
| total_amount | BIGINT | åˆè¨ˆé‡‘é¡ï¼ˆç¨è¾¼ï¼‰ |
| tax_excluded_amount | BIGINT | ç¨æŠœé‡‘é¡ |
| tax_amount | BIGINT | æ¶ˆè²»ç¨é¡ |
| tax_rate | DECIMAL(3,2) | ç¨ç‡ï¼ˆ0.10/0.08ï¼‰ |
| payment_due_date | TIMESTAMPTZ | æ”¯æ‰•æœŸæ—¥ |
| delivery_date | TIMESTAMPTZ | ç´æœŸ |
| details | JSONB | æ³¨æ–‡è©³ç´°ï¼ˆæ¡å¯¸ãƒ‡ãƒ¼ã‚¿ç­‰ï¼‰ |
| compliance_doc_url | TEXT | ç™ºæ³¨æ›¸PDF URL |
| compliance_doc_hash | VARCHAR(64) | ç™ºæ³¨æ›¸PDFãƒãƒƒã‚·ãƒ¥ |
| invoice_issued_at | TIMESTAMPTZ | ã‚¤ãƒ³ãƒœã‚¤ã‚¹ç™ºè¡Œæ—¥æ™‚ |
| created_at | TIMESTAMPTZ | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMPTZ | æ›´æ–°æ—¥æ™‚ |
| created_by | VARCHAR(50) | ä½œæˆè€…ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- `idx_orders_tenant_id` (tenant_id)
- `idx_orders_customer_id` (customer_id)
- `idx_orders_status` (status)
- `idx_orders_tenant_status` (tenant_id, status)
- `idx_orders_delivery_date` (delivery_date)

#### 4. fabrics (ç”Ÿåœ°)

ç”Ÿåœ°æƒ…å ±ã€‚

| ã‚«ãƒ©ãƒ å | å‹ | èª¬æ˜ |
|---------|-----|------|
| id | VARCHAR(50) PK | ç”Ÿåœ°ID |
| tenant_id | VARCHAR(50) FK | ãƒ†ãƒŠãƒ³ãƒˆID |
| supplier_id | VARCHAR(50) | ã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãƒ¼ID |
| brand | VARCHAR(255) | ãƒ–ãƒ©ãƒ³ãƒ‰å |
| name | VARCHAR(255) | ç”Ÿåœ°å |
| sku | VARCHAR(100) | SKU |
| color | VARCHAR(100) | è‰² |
| pattern | VARCHAR(100) | ãƒ‘ã‚¿ãƒ¼ãƒ³ |
| price_per_meter | BIGINT | å˜ä¾¡ï¼ˆå††/ãƒ¡ãƒ¼ãƒˆãƒ«ï¼‰ |
| stock_quantity | DECIMAL(10,2) | åœ¨åº«æ•°é‡ï¼ˆãƒ¡ãƒ¼ãƒˆãƒ«ï¼‰ |
| status | VARCHAR(20) | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆAvailable/Limited/SoldOutï¼‰ |
| image_url | TEXT | ç”»åƒURL |
| created_at | TIMESTAMPTZ | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMPTZ | æ›´æ–°æ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- `idx_fabrics_tenant_id` (tenant_id)
- `idx_fabrics_brand` (brand)
- `idx_fabrics_tenant_status` (tenant_id, status)

#### 5. fabric_rolls (åç‰©)

åç‰©ï¼ˆRollï¼‰å˜ä½ã®åœ¨åº«ç®¡ç†ã€‚

| ã‚«ãƒ©ãƒ å | å‹ | èª¬æ˜ |
|---------|-----|------|
| id | VARCHAR(50) PK | åç‰©ID |
| tenant_id | VARCHAR(50) FK | ãƒ†ãƒŠãƒ³ãƒˆID |
| fabric_id | VARCHAR(50) FK | ç”Ÿåœ°ID |
| roll_number | VARCHAR(100) | ãƒ­ãƒ¼ãƒ«ç•ªå· |
| initial_length | DECIMAL(10,2) | åˆæœŸé•·ã•ï¼ˆãƒ¡ãƒ¼ãƒˆãƒ«ï¼‰ |
| current_length | DECIMAL(10,2) | ç¾åœ¨ã®é•·ã•ï¼ˆãƒ¡ãƒ¼ãƒˆãƒ«ï¼‰ |
| status | VARCHAR(20) | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆAvailable/Allocated/Consumedï¼‰ |
| location | VARCHAR(255) | ä¿ç®¡å ´æ‰€ |
| owner_type | VARCHAR(20) | æ‰€æœ‰è€…ã‚¿ã‚¤ãƒ—ï¼ˆOwn/Consigned/Entrustedï¼‰ |
| created_at | TIMESTAMPTZ | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMPTZ | æ›´æ–°æ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- `idx_fabric_rolls_tenant_id` (tenant_id)
- `idx_fabric_rolls_fabric_id` (fabric_id)
- `idx_fabric_rolls_status` (status)
- `idx_fabric_rolls_tenant_status` (tenant_id, status)

#### 6. fabric_allocations (ç”Ÿåœ°å‰²å½“)

æ³¨æ–‡ã«å¯¾ã™ã‚‹ç”Ÿåœ°ã®å‰²å½“ã€‚

| ã‚«ãƒ©ãƒ å | å‹ | èª¬æ˜ |
|---------|-----|------|
| id | VARCHAR(50) PK | å‰²å½“ID |
| order_id | VARCHAR(50) FK | æ³¨æ–‡ID |
| fabric_roll_id | VARCHAR(50) FK | åç‰©ID |
| allocated_length | DECIMAL(10,2) | å‰²å½“é•·ã•ï¼ˆãƒ¡ãƒ¼ãƒˆãƒ«ï¼‰ |
| status | VARCHAR(20) | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆAllocated/Releasedï¼‰ |
| created_at | TIMESTAMPTZ | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMPTZ | æ›´æ–°æ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- `idx_fabric_allocations_order_id` (order_id)
- `idx_fabric_allocations_roll_id` (fabric_roll_id)
- `idx_fabric_allocations_status` (status)

#### 7. ambassadors (ã‚¢ãƒ³ãƒã‚µãƒ€ãƒ¼)

å­¦ç”Ÿã‚¢ãƒ³ãƒã‚µãƒ€ãƒ¼æƒ…å ±ã€‚

| ã‚«ãƒ©ãƒ å | å‹ | èª¬æ˜ |
|---------|-----|------|
| id | VARCHAR(50) PK | ã‚¢ãƒ³ãƒã‚µãƒ€ãƒ¼ID |
| tenant_id | VARCHAR(50) FK | ãƒ†ãƒŠãƒ³ãƒˆID |
| user_id | VARCHAR(50) | ãƒ¦ãƒ¼ã‚¶ãƒ¼IDï¼ˆFirebase Authï¼‰ |
| name | VARCHAR(255) | åå‰ |
| email | VARCHAR(255) | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ |
| phone | VARCHAR(50) | é›»è©±ç•ªå· |
| status | VARCHAR(20) | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
| commission_rate | DECIMAL(5,2) | æˆæœå ±é…¬ç‡ï¼ˆ%ï¼‰ |
| total_sales | BIGINT | ç´¯è¨ˆå£²ä¸Š |
| total_commission | BIGINT | ç´¯è¨ˆå ±é…¬ |
| created_at | TIMESTAMPTZ | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMPTZ | æ›´æ–°æ—¥æ™‚ |

#### 8. commissions (æˆæœå ±é…¬)

æ³¨æ–‡ã”ã¨ã®æˆæœå ±é…¬ã€‚

| ã‚«ãƒ©ãƒ å | å‹ | èª¬æ˜ |
|---------|-----|------|
| id | VARCHAR(50) PK | å ±é…¬ID |
| ambassador_id | VARCHAR(50) FK | ã‚¢ãƒ³ãƒã‚µãƒ€ãƒ¼ID |
| order_id | VARCHAR(50) FK | æ³¨æ–‡ID |
| commission_amount | BIGINT | å ±é…¬é¡ |
| status | VARCHAR(20) | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
| created_at | TIMESTAMPTZ | ä½œæˆæ—¥æ™‚ |
| paid_at | TIMESTAMPTZ | æ”¯æ‰•æ—¥æ™‚ |

#### 9. compliance_documents (ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹æ–‡æ›¸)

ç™ºæ³¨æ›¸PDFã®å±¥æ­´ç®¡ç†ã€‚

| ã‚«ãƒ©ãƒ å | å‹ | èª¬æ˜ |
|---------|-----|------|
| id | VARCHAR(50) PK | æ–‡æ›¸ID |
| order_id | VARCHAR(50) FK | æ³¨æ–‡ID |
| document_type | VARCHAR(20) | INITIAL / AMENDMENT |
| parent_document_id | VARCHAR(50) FK | è¦ªæ–‡æ›¸IDï¼ˆä¿®æ­£ã®å ´åˆï¼‰ |
| pdf_url | TEXT | PDF URL |
| pdf_hash | VARCHAR(64) | PDFãƒãƒƒã‚·ãƒ¥ |
| generated_at | TIMESTAMPTZ | ç”Ÿæˆæ—¥æ™‚ |
| generated_by | VARCHAR(50) FK | ç”Ÿæˆè€…ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| amendment_reason | TEXT | ä¿®æ­£ç†ç”± |
| version | INTEGER | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå· |

#### 10. permissions (æ¨©é™)

ç´°ã‹ã„æ¨©é™ç®¡ç†ï¼ˆRBACï¼‰ã€‚

| ã‚«ãƒ©ãƒ å | å‹ | èª¬æ˜ |
|---------|-----|------|
| id | VARCHAR(50) PK | æ¨©é™ID |
| tenant_id | VARCHAR(50) FK | ãƒ†ãƒŠãƒ³ãƒˆID |
| resource_type | VARCHAR(50) | ãƒªã‚½ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ—ï¼ˆOrder/Customer/...ï¼‰ |
| resource_id | VARCHAR(50) | ãƒªã‚½ãƒ¼ã‚¹IDï¼ˆ*ã¯å…¨ä»¶ï¼‰ |
| action | VARCHAR(50) | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆcreate/read/update/deleteï¼‰ |
| role | VARCHAR(50) | ãƒ­ãƒ¼ãƒ«ï¼ˆOwner/Staff/...ï¼‰ |
| granted | BOOLEAN | è¨±å¯/æ‹’å¦ |
| created_at | TIMESTAMPTZ | ä½œæˆæ—¥æ™‚ |
| updated_at | TIMESTAMPTZ | æ›´æ–°æ—¥æ™‚ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- `idx_permissions_tenant_id` (tenant_id)
- `idx_permissions_resource_type` (resource_type)
- `idx_permissions_role` (role)
- `idx_permissions_action` (action)

#### 11. audit_logs (ç›£æŸ»ãƒ­ã‚°)

å…¨ã¦ã®æ“ä½œã‚’è¨˜éŒ²ï¼ˆæ”¹ã–ã‚“é˜²æ­¢ï¼‰ã€‚

| ã‚«ãƒ©ãƒ å | å‹ | èª¬æ˜ |
|---------|-----|------|
| id | VARCHAR(50) PK | ãƒ­ã‚°ID |
| tenant_id | VARCHAR(50) FK | ãƒ†ãƒŠãƒ³ãƒˆID |
| user_id | VARCHAR(50) | ãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| action | VARCHAR(50) | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ |
| resource_type | VARCHAR(50) | ãƒªã‚½ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ— |
| resource_id | VARCHAR(50) | ãƒªã‚½ãƒ¼ã‚¹ID |
| ip_address | VARCHAR(45) | IPã‚¢ãƒ‰ãƒ¬ã‚¹ |
| user_agent | TEXT | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ |
| device_id | VARCHAR(50) | ãƒ‡ãƒã‚¤ã‚¹ID |
| old_values | JSONB | å¤‰æ›´å‰ã®å€¤ |
| new_values | JSONB | å¤‰æ›´å¾Œã®å€¤ |
| change_summary | TEXT | å¤‰æ›´ã‚µãƒãƒªãƒ¼ |
| log_hash | VARCHAR(64) | ãƒ­ã‚°ãƒãƒƒã‚·ãƒ¥ï¼ˆæ”¹ã–ã‚“æ¤œå‡ºç”¨ï¼‰ |
| created_at | TIMESTAMPTZ | ä½œæˆæ—¥æ™‚ |
| archived_at | TIMESTAMPTZ | ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ—¥æ™‚ |
| archive_location | TEXT | ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å…ˆ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
- `idx_audit_logs_tenant_id` (tenant_id)
- `idx_audit_logs_user_id` (user_id)
- `idx_audit_logs_created_at` (created_at)
- `idx_audit_logs_resource` (resource_type, resource_id)

#### 12. audit_log_archives (ç›£æŸ»ãƒ­ã‚°ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–)

ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã•ã‚ŒãŸç›£æŸ»ãƒ­ã‚°ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã€‚

| ã‚«ãƒ©ãƒ å | å‹ | èª¬æ˜ |
|---------|-----|------|
| id | VARCHAR(50) PK | ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ID |
| tenant_id | VARCHAR(50) FK | ãƒ†ãƒŠãƒ³ãƒˆID |
| archive_period_start | TIMESTAMPTZ | ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æœŸé–“é–‹å§‹ |
| archive_period_end | TIMESTAMPTZ | ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æœŸé–“çµ‚äº† |
| file_url | TEXT | ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãƒ•ã‚¡ã‚¤ãƒ«URL |
| file_hash | VARCHAR(64) | ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒƒã‚·ãƒ¥ |
| archived_by | VARCHAR(50) | ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å®Ÿè¡Œè€… |
| archived_at | TIMESTAMPTZ | ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ—¥æ™‚ |

---

## ğŸ”Œ APIä»•æ§˜

### èªè¨¼

ã™ã¹ã¦ã®APIï¼ˆ`/health`ã¨`/api/metrics`ã‚’é™¤ãï¼‰ã¯èªè¨¼ãŒå¿…è¦ã§ã™ã€‚

**èªè¨¼æ–¹æ³•**: Firebase Authentication JWT
**ãƒ˜ãƒƒãƒ€ãƒ¼**: `Authorization: Bearer <JWT_TOKEN>`

### ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§

#### 1. ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

```
GET /health
```

**èªè¨¼**: ä¸è¦  
**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: `200 OK`
```json
"OK"
```

---

#### 2. æ³¨æ–‡ç®¡ç†

##### 2.1 æ³¨æ–‡ä½œæˆ

```
POST /api/orders
```

**èªè¨¼**: å¿…é ˆ  
**ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£**:
```json
{
  "customer_id": "customer-001",
  "fabric_id": "fabric-001",
  "total_amount": 135000,
  "delivery_date": "2025-12-31T00:00:00Z",
  "details": {
    "description": "ã‚ªãƒ¼ãƒ€ãƒ¼ã‚¹ãƒ¼ãƒ„ç¸«è£½",
    "measurement_data": {},
    "adjustments": {}
  }
}
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: `201 Created`
```json
{
  "id": "order-001",
  "tenant_id": "tenant-123",
  "customer_id": "customer-001",
  "fabric_id": "fabric-001",
  "status": "Draft",
  "total_amount": 135000,
  "delivery_date": "2025-12-31T00:00:00Z",
  "created_at": "2025-01-01T00:00:00Z"
}
```

##### 2.2 æ³¨æ–‡ç¢ºå®š

```
POST /api/orders/confirm
```

**èªè¨¼**: å¿…é ˆï¼ˆOwner/Staffï¼‰  
**ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£**:
```json
{
  "order_id": "order-001",
  "principal_name": "Regalis Societas"
}
```

##### 2.3 æ³¨æ–‡å–å¾—ï¼ˆå˜ä¸€ï¼‰

```
GET /api/orders?order_id={order_id}&tenant_id={tenant_id}
```

**èªè¨¼**: å¿…é ˆ

##### 2.4 æ³¨æ–‡ä¸€è¦§å–å¾—

```
GET /api/orders?tenant_id={tenant_id}&page=1&limit=20
```

**èªè¨¼**: å¿…é ˆ  
**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- `tenant_id` (å¿…é ˆ)
- `page` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1)
- `limit` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 20)

---

#### 3. ã‚³ãƒ³ãƒ—ãƒ©ã‚¤ã‚¢ãƒ³ã‚¹æ–‡æ›¸

##### 3.1 ç™ºæ³¨æ›¸ç”Ÿæˆï¼ˆä¸‹è«‹æ³•å¯¾å¿œï¼‰

```
POST /api/orders/{id}/generate-document
```

**èªè¨¼**: å¿…é ˆï¼ˆOwner/Staffï¼‰  
**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: `200 OK`
```json
{
  "order_id": "order-001",
  "doc_url": "https://storage.googleapis.com/...",
  "doc_hash": "sha256:...",
  "generated_at": "2025-01-01T00:00:00Z"
}
```

##### 3.2 ä¿®æ­£ç™ºæ³¨æ›¸ç”Ÿæˆ

```
POST /api/orders/{id}/generate-amendment
```

**èªè¨¼**: å¿…é ˆï¼ˆOwner/Staffï¼‰  
**ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£**:
```json
{
  "amendment_reason": "ç´æœŸå¤‰æ›´ã®ãŸã‚"
}
```

---

#### 4. é¡§å®¢ç®¡ç†ï¼ˆCRMï¼‰

##### 4.1 é¡§å®¢ä½œæˆ

```
POST /api/customers
```

**èªè¨¼**: å¿…é ˆï¼ˆOwner/Staffï¼‰  
**ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£**:
```json
{
  "name": "ç”°ä¸­ å¤ªéƒ",
  "name_kana": "ã‚¿ãƒŠã‚« ã‚¿ãƒ­ã‚¦",
  "email": "tanaka@example.com",
  "phone": "090-1234-5678",
  "address": "æ±äº¬éƒ½..."
}
```

##### 4.2 é¡§å®¢å–å¾—

```
GET /api/customers/{id}
```

##### 4.3 é¡§å®¢ä¸€è¦§å–å¾—

```
GET /api/customers?tenant_id={tenant_id}
```

##### 4.4 é¡§å®¢æ›´æ–°

```
PUT /api/customers/{id}
```

**èªè¨¼**: å¿…é ˆï¼ˆOwner/Staffï¼‰

##### 4.5 é¡§å®¢å‰Šé™¤

```
DELETE /api/customers/{id}
```

**èªè¨¼**: å¿…é ˆï¼ˆOwnerã®ã¿ï¼‰

##### 4.6 é¡§å®¢ã®æ³¨æ–‡ä¸€è¦§

```
GET /api/customers/{id}/orders
```

---

#### 5. ç”Ÿåœ°ç®¡ç†

##### 5.1 ç”Ÿåœ°ä¸€è¦§å–å¾—

```
GET /api/fabrics?tenant_id={tenant_id}&status={status}
```

**ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**:
- `tenant_id` (å¿…é ˆ)
- `status` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³: Available/Limited/SoldOut)
- `search` (ã‚ªãƒ—ã‚·ãƒ§ãƒ³: æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰)

##### 5.2 ç”Ÿåœ°è©³ç´°å–å¾—

```
GET /api/fabrics/detail?id={id}
```

##### 5.3 ç”Ÿåœ°äºˆç´„

```
POST /api/fabrics/reserve
```

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£**:
```json
{
  "fabric_id": "fabric-001",
  "order_id": "order-001",
  "amount": 3.2
}
```

---

#### 6. åç‰©ç®¡ç†ï¼ˆRoll Managementï¼‰

##### 6.1 åç‰©ä½œæˆ

```
POST /api/fabric-rolls
```

**èªè¨¼**: å¿…é ˆï¼ˆOwner/Staffï¼‰  
**ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£**:
```json
{
  "fabric_id": "fabric-001",
  "roll_number": "VBC-001-NV-001",
  "initial_length": 50.0,
  "location": "å€‰åº«A"
}
```

##### 6.2 åç‰©å–å¾—

```
GET /api/fabric-rolls/{id}
```

##### 6.3 åç‰©ä¸€è¦§å–å¾—

```
GET /api/fabric-rolls?tenant_id={tenant_id}&fabric_id={fabric_id}
```

##### 6.4 åç‰©æ›´æ–°

```
PUT /api/fabric-rolls/{id}
```

---

#### 7. åœ¨åº«å¼•å½“

##### 7.1 åœ¨åº«å¼•å½“

```
POST /api/inventory/allocate
```

**èªè¨¼**: å¿…é ˆï¼ˆOwner/Staffï¼‰  
**ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£**:
```json
{
  "order_id": "order-001",
  "fabric_roll_id": "roll-001",
  "length": 3.2
}
```

##### 7.2 åœ¨åº«è§£æ”¾

```
POST /api/inventory/release
```

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£**:
```json
{
  "allocation_id": "allocation-001"
}
```

---

#### 8. ã‚¤ãƒ³ãƒœã‚¤ã‚¹

##### 8.1 ã‚¤ãƒ³ãƒœã‚¤ã‚¹ç”Ÿæˆ

```
POST /api/orders/{id}/generate-invoice
```

**èªè¨¼**: å¿…é ˆï¼ˆOwner/Staffï¼‰  
**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: `200 OK`
```json
{
  "order_id": "order-001",
  "doc_url": "https://storage.googleapis.com/...",
  "doc_hash": "sha256:...",
  "generated_at": "2025-01-01T00:00:00Z"
}
```

---

#### 9. ã‚¢ãƒ³ãƒã‚µãƒ€ãƒ¼ç®¡ç†

##### 9.1 ã‚¢ãƒ³ãƒã‚µãƒ€ãƒ¼ä½œæˆ

```
POST /api/ambassadors
```

**èªè¨¼**: å¿…é ˆï¼ˆOwnerã®ã¿ï¼‰

##### 9.2 è‡ªåˆ†ã®ã‚¢ãƒ³ãƒã‚µãƒ€ãƒ¼æƒ…å ±å–å¾—

```
GET /api/ambassadors/me
```

##### 9.3 ã‚¢ãƒ³ãƒã‚µãƒ€ãƒ¼ä¸€è¦§å–å¾—

```
GET /api/ambassadors?tenant_id={tenant_id}
```

##### 9.4 æˆæœå ±é…¬ä¸€è¦§å–å¾—

```
GET /api/ambassadors/commissions?ambassador_id={id}
```

---

#### 10. æ¨©é™ç®¡ç†ï¼ˆRBACï¼‰

##### 10.1 æ¨©é™ä½œæˆ

```
POST /api/permissions
```

**èªè¨¼**: å¿…é ˆï¼ˆOwnerã®ã¿ï¼‰  
**ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£**:
```json
{
  "resource_type": "Order",
  "resource_id": "*",
  "action": "create",
  "role": "Staff",
  "granted": true
}
```

##### 10.2 æ¨©é™ä¸€è¦§å–å¾—

```
GET /api/permissions?tenant_id={tenant_id}
```

##### 10.3 æ¨©é™ãƒã‚§ãƒƒã‚¯

```
POST /api/permissions/check
```

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£**:
```json
{
  "resource_type": "Order",
  "resource_id": "order-001",
  "action": "update"
}
```

---

#### 11. ç›£è¦–ãƒ»é‹ç”¨

##### 11.1 ãƒ¡ãƒˆãƒªã‚¯ã‚¹å–å¾—

```
GET /api/metrics
```

**èªè¨¼**: ä¸è¦  
**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: `200 OK`
```json
{
  "total_requests": 1000,
  "total_errors": 5,
  "error_rate": 0.005,
  "average_latency": 150000000,
  "request_count": 1000,
  "db_connections": 10,
  "db_connections_in_use": 5,
  "timestamp": "2025-01-01T00:00:00Z"
}
```

---

## ğŸ“± ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ä»•æ§˜

### ç”»é¢æ§‹æˆ

#### 1. ãƒ›ãƒ¼ãƒ ç”»é¢ï¼ˆDashboardï¼‰

**æ©Ÿèƒ½**:
- KPIè¡¨ç¤ºï¼ˆä»Šæ—¥ã®å£²ä¸Šã€ã‚¢ã‚¯ãƒ†ã‚£ãƒ–æ³¨æ–‡æ•°ã€åœ¨åº«ã‚¢ãƒ©ãƒ¼ãƒˆï¼‰
- ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ
- ãƒŸãƒ«æ›´æ–°ãƒ•ã‚£ãƒ¼ãƒ‰
- ã‚¯ã‚¤ãƒƒã‚¯ç™ºæ³¨ãƒœã‚¿ãƒ³

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/screens/home/home_screen.dart`

#### 2. åœ¨åº«ç”»é¢ï¼ˆInventoryï¼‰

**æ©Ÿèƒ½**:
- ç”Ÿåœ°ä¸€è¦§è¡¨ç¤º
- æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
- åœ¨åº«ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºï¼ˆAvailable/Limited/SoldOutï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/screens/inventory/inventory_screen.dart`

#### 3. ã‚¯ã‚¤ãƒƒã‚¯ç™ºæ³¨ç”»é¢

**æ©Ÿèƒ½**:
- ã‚¹ãƒ†ãƒƒãƒ—1: é¡§å®¢é¸æŠï¼ˆæ—¢å­˜é¡§å®¢é¸æŠ or æ–°è¦ç™»éŒ²ï¼‰
- ã‚¹ãƒ†ãƒƒãƒ—2: ç”Ÿåœ°é¸æŠ
- ã‚¹ãƒ†ãƒƒãƒ—3: é‡‘é¡ãƒ»ç´æœŸå…¥åŠ›
- ç™ºæ³¨æ›¸ç”Ÿæˆï¼ˆãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ä¿è­·æ³•å¯¾å¿œï¼‰

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/screens/order/quick_order_screen.dart`

**ç›®æ¨™**: 3åˆ†ã§ç™ºæ³¨æ›¸ä½œæˆå®Œäº†

#### 4. è¦–è¦šçš„ç™ºæ³¨ç”»é¢ï¼ˆVisual Orderingï¼‰

**æ©Ÿèƒ½**:
- äººä½“å›³ã«ã‚ˆã‚‹æ¡å¯¸å…¥åŠ›
- ä»•æ§˜é¸æŠ
- æ³¨æ–‡ç¢ºå®š

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/screens/order/visual_ordering_screen.dart`

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ï¼ˆå°†æ¥å®Ÿè£…ï¼‰

---

### ãƒ¢ãƒ‡ãƒ«ã‚¯ãƒ©ã‚¹

#### 1. Order (æ³¨æ–‡)

```dart
class Order {
  final String id;
  final String tenantId;
  final String customerId;
  final String fabricId;
  final OrderStatus status;
  final int totalAmount;
  final DateTime paymentDueDate;
  final DateTime deliveryDate;
  final OrderDetails? details;
  final String? complianceDocUrl;
  final String? complianceDocHash;
}
```

#### 2. Customer (é¡§å®¢)

```dart
class Customer {
  final String id;
  final String tenantId;
  final String name;
  final String? nameKana;
  final String? email;
  final String? phone;
  final String? address;
}
```

#### 3. Fabric (ç”Ÿåœ°)

```dart
class Fabric {
  final String id;
  final String tenantId;
  final String brand;
  final String name;
  final String sku;
  final String color;
  final String pattern;
  final int pricePerMeter;
  final double stockQuantity;
  final StockStatus status;
}
```

#### 4. Ambassador (ã‚¢ãƒ³ãƒã‚µãƒ€ãƒ¼)

```dart
class Ambassador {
  final String id;
  final String tenantId;
  final String userId;
  final String name;
  final double commissionRate;
  final int totalSales;
  final int totalCommission;
}
```

---

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### èªè¨¼ãƒ»èªå¯

1. **Firebase Authentication**
   - JWT ãƒˆãƒ¼ã‚¯ãƒ³ãƒ™ãƒ¼ã‚¹èªè¨¼
   - ãƒ¡ãƒ¼ãƒ«/ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã®å–å¾—

2. **RBACï¼ˆRole-Based Access Controlï¼‰**
   - Owner: å…¨æ¨©é™
   - Staff: ç™ºæ³¨ä½œæˆãƒ»é¡§å®¢ç®¡ç†
   - Factory_Manager: å—æ³¨ç®¡ç†
   - Worker: ä½œæ¥­å®Œäº†ãƒã‚§ãƒƒã‚¯

3. **ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿åˆ†é›¢**
   - ã™ã¹ã¦ã®ã‚¯ã‚¨ãƒªã§`tenant_id`ã«ã‚ˆã‚‹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
   - ãƒªãƒã‚¸ãƒˆãƒªå±¤ã§ã®ãƒ†ãƒŠãƒ³ãƒˆIDæ¤œè¨¼
   - ãƒ‡ãƒ¼ã‚¿ãƒªãƒ¼ã‚¯ã®é˜²æ­¢

### ç›£æŸ»ãƒ­ã‚°

1. **å…¨æ“ä½œã®è¨˜éŒ²**
   - èª°ãŒã€ã„ã¤ã€ä½•ã‚’ã€ã©ã®ã‚ˆã†ã«å¤‰æ›´ã—ãŸã‹
   - IPã‚¢ãƒ‰ãƒ¬ã‚¹ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€ãƒ‡ãƒã‚¤ã‚¹ID
   - å¤‰æ›´å‰å¾Œã®å€¤ï¼ˆJSONBå½¢å¼ï¼‰

2. **æ”¹ã–ã‚“æ¤œå‡º**
   - SHA-256ãƒãƒƒã‚·ãƒ¥ã«ã‚ˆã‚‹æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
   - WORMã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆWrite Once Read Manyï¼‰

3. **ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–**
   - 5å¹´é–“ã®ä¿æŒæœŸé–“
   - Cloud Storageã¸ã®é•·æœŸä¿å­˜
   - ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†

---

## ğŸ“ˆ ç›£è¦–ãƒ»é‹ç”¨

### æ§‹é€ åŒ–ãƒ­ã‚°

- **ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**: JSON
- **ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«**: INFO, WARNING, ERROR
- **ãƒˆãƒ¬ãƒ¼ã‚¹ID**: å…¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ä»˜ä¸
- **ã‚µãƒ¼ãƒ“ã‚¹å**: tailorcloud-backend

### ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†

- **ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°**: ç·ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°ã€ã‚¨ãƒ©ãƒ¼æ•°
- **ã‚¨ãƒ©ãƒ¼ç‡**: ã‚¨ãƒ©ãƒ¼ç‡ã®è¨ˆç®—
- **ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãƒ¼**: å¹³å‡ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãƒ¼
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š**: æ¥ç¶šæ•°ã€ä½¿ç”¨ä¸­æ¥ç¶šæ•°

### ã‚¢ãƒ©ãƒ¼ãƒˆ

- **ã‚¨ãƒ©ãƒ¼ç‡**: 5%ä»¥ä¸Šã§ã‚¢ãƒ©ãƒ¼ãƒˆ
- **ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãƒ¼**: 1ç§’ä»¥ä¸Šã§ã‚¢ãƒ©ãƒ¼ãƒˆ
- **DBæ¥ç¶š**: 80%ä½¿ç”¨ã§ã‚¢ãƒ©ãƒ¼ãƒˆ

---

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

**ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: Google Cloud Run

**ç’°å¢ƒå¤‰æ•°**:
- `PORT`: ã‚µãƒ¼ãƒãƒ¼ãƒãƒ¼ãƒˆï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 8080ï¼‰
- `POSTGRES_HOST`: PostgreSQLãƒ›ã‚¹ãƒˆ
- `POSTGRES_USER`: PostgreSQLãƒ¦ãƒ¼ã‚¶ãƒ¼
- `POSTGRES_PASSWORD`: PostgreSQLãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
- `POSTGRES_DB`: PostgreSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å
- `GCP_PROJECT_ID`: Firebaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID
- `GCS_BUCKET_NAME`: Cloud Storageãƒã‚±ãƒƒãƒˆå

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

**ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: 
- iOS: App Store
- Android: Google Play Store
- Web: PWAï¼ˆå°†æ¥ï¼‰

**ç’°å¢ƒå¤‰æ•°**:
- `API_BASE_URL`: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIã®URL

---

## ğŸ“‹ å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½

### Phase 1: ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºåŸºç›¤ âœ…

- âœ… Rollç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆåç‰©å˜ä½ã®åœ¨åº«ç®¡ç†ï¼‰
- âœ… åœ¨åº«å¼•å½“ã‚·ã‚¹ãƒ†ãƒ ï¼ˆæ¥½è¦³çš„ãƒ­ãƒƒã‚¯ï¼‰
- âœ… æ³•è¦åˆ¶å®Œå…¨æº–æ‹ ï¼ˆä¸‹è«‹æ³•ã€ã‚¤ãƒ³ãƒœã‚¤ã‚¹åˆ¶åº¦ï¼‰
- âœ… ä¿®æ­£ç™ºæ³¨æ›¸ã®å±¥æ­´ç®¡ç†
- âœ… RBACï¼ˆç´°ã‹ã„æ¨©é™ç®¡ç†ï¼‰
- âœ… ç›£æŸ»ãƒ­ã‚°å¼·åŒ–ï¼ˆæ”¹ã–ã‚“æ¤œå‡ºã€ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ï¼‰
- âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–ï¼ˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã€ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
- âœ… ç›£è¦–ãƒ»é‹ç”¨åŸºç›¤ï¼ˆãƒ­ã‚°ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ã‚¢ãƒ©ãƒ¼ãƒˆï¼‰

### Phase 2: ã‚·ãƒ¼ãƒ‰èª¿é”ç”¨MVP âœ…

- âœ… ã‚¯ã‚¤ãƒƒã‚¯ç™ºæ³¨ç”»é¢ï¼ˆ3åˆ†ã§ç™ºæ³¨æ›¸ä½œæˆï¼‰
- âœ… ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ä¿è­·æ³•å¯¾å¿œPDFç”Ÿæˆ
- âœ… ç°¡æ˜“é¡§å®¢ç®¡ç†ï¼ˆCRMï¼‰
- âœ… ã‚¹ãƒãƒ›å¯¾å¿œUI

---

## ğŸ“Š çµ±è¨ˆ

### ã‚³ãƒ¼ãƒ‰çµ±è¨ˆ

- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: ç´„15,000è¡Œï¼ˆGoï¼‰
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: ç´„5,000è¡Œï¼ˆDartï¼‰
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: 12ãƒ†ãƒ¼ãƒ–ãƒ«ã€50+ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
- **APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: 30+

### å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«æ•°

- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: 54ãƒ•ã‚¡ã‚¤ãƒ«
- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: 30ãƒ•ã‚¡ã‚¤ãƒ«
- **ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**: 12ãƒ•ã‚¡ã‚¤ãƒ«
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: 72ãƒ•ã‚¡ã‚¤ãƒ«

---

## ğŸ”„ ä»Šå¾Œã®é–‹ç™ºè¨ˆç”»

è©³ç´°ã¯ `docs/68_Future_Development_Plan.md` ã‚’å‚ç…§ã€‚

### Phase 1: PMFé”æˆï¼ˆè³‡é‡‘èª¿é”å¾Œã€œ3ãƒ¶æœˆï¼‰

1. **ãƒ‡ãƒ¢æ”¹å–„**ï¼ˆ1é€±é–“ï¼‰
2. **èªè¨¼æ©Ÿèƒ½ã®å®Ÿè£…**ï¼ˆ2é€±é–“ï¼‰
3. **é¡§å®¢ç®¡ç†ã®å®Œå…¨å®Ÿè£…**ï¼ˆ2é€±é–“ï¼‰
4. **ç™ºæ³¨æ›¸å±¥æ­´ç®¡ç†**ï¼ˆ1é€±é–“ï¼‰
5. **å·¥å ´é€£æºã®åŸºç¤**ï¼ˆ3é€±é–“ï¼‰

### Phase 2: ã‚¹ã‚±ãƒ¼ãƒ«æº–å‚™ï¼ˆ3ã€œ6ãƒ¶æœˆï¼‰

6. **åœ¨åº«ç®¡ç†ã®å®Ÿè£…**ï¼ˆ6é€±é–“ï¼‰
7. **æ±ºæ¸ˆæ©Ÿèƒ½ã®å®Ÿè£…**ï¼ˆ4é€±é–“ï¼‰
8. **ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½**ï¼ˆ2é€±é–“ï¼‰

### Phase 3: ã‚¹ã‚±ãƒ¼ãƒ«ï¼ˆ6ã€œ12ãƒ¶æœˆï¼‰

9. **AIæ©Ÿèƒ½ã®å®Ÿè£…**ï¼ˆ8é€±é–“ï¼‰
10. **ãƒãƒ«ãƒãƒ–ãƒ©ãƒ³ãƒ‰å¯¾å¿œ**ï¼ˆ4é€±é–“ï¼‰
11. **APIå…¬é–‹**ï¼ˆ6é€±é–“ï¼‰

---

**æœ€çµ‚æ›´æ–°æ—¥**: 2025-01  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 2.0.0  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºæ©Ÿèƒ½å®Ÿè£…å®Œäº†ã€ã‚·ãƒ¼ãƒ‰èª¿é”ç”¨MVPå®Œæˆ

